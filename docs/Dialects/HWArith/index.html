<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>'hwarith' Dialect - CIRCT</title><meta name=description content="Circuit IR Compilers and Tools"><meta name=generator content="Hugo 0.101.0"><link href=https://circt.llvm.org/index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://circt.llvm.org/docs/Dialects/HWArith/><link rel=stylesheet href=https://circt.llvm.org/css/theme.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script>
<link rel=stylesheet href=https://circt.llvm.org/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script>
<script src=https://circt.llvm.org/js/bundle.js></script>
<script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$', '$'] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
    }
  });
</script><style>:root{}</style></head><body><div class=container><header><h1><div><img src=https://circt.llvm.org//circt-logo.svg width=40px align=absmiddle>
CIRCT</div></h1><p class=description>Circuit IR Compilers and Tools</p></header><div class=global-menu><nav><ul><li class=parent><a href>Community<i class="fas fa-angle-right"></i></a><ul class=sub-menu><li class=child><a href=https://llvm.discourse.group/c/Projects-that-want-to-become-official-LLVM-Projects/circt/40>Forums</a></li><li class=child><a href=https://discord.gg/xS7Z362>Chat</a></li></ul></li><li class=parent><a href=https://github.com/llvm/circt/tree/main/>Source<i class="fas fa-angle-right"></i></a><ul class=sub-menu><li class=child><a href=/doxygen/>Doxygen</a></li><li class=child><a href=https://github.com/llvm/circt/tree/main/>GitHub</a></li></ul></li></ul></nav></div><div class=content-container><main><h1>'hwarith' Dialect</h1><p>Types and operations for the HWArith dialect
This dialect defines the <code>HWArith</code> dialect, modeling bit-width aware
arithmetic operations.</p><p><nav id=TableOfContents><ul><li><a href=#operations>Operations</a><ul><li><a href=#hwarithadd-circthwarithaddop><code>hwarith.add</code> (::circt::hwarith::AddOp)</a></li><li><a href=#hwarithcast-circthwarithcastop><code>hwarith.cast</code> (::circt::hwarith::CastOp)</a></li><li><a href=#hwarithconstant-circthwarithconstantop><code>hwarith.constant</code> (::circt::hwarith::ConstantOp)</a></li><li><a href=#hwarithdiv-circthwarithdivop><code>hwarith.div</code> (::circt::hwarith::DivOp)</a></li><li><a href=#hwarithicmp-circthwarithicmpop><code>hwarith.icmp</code> (::circt::hwarith::ICmpOp)</a></li><li><a href=#hwarithmul-circthwarithmulop><code>hwarith.mul</code> (::circt::hwarith::MulOp)</a></li><li><a href=#hwarithsub-circthwarithsubop><code>hwarith.sub</code> (::circt::hwarith::SubOp)</a></li></ul></li><li><a href=#type-constraints>Type constraints</a><ul><li><a href=#an-arbitrary-precision-integer-with-signedness-semantics>an arbitrary precision integer with signedness semantics</a></li></ul></li></ul></nav><h2 id=operations>Operations</h2><h3 id=hwarithadd-circthwarithaddop><code>hwarith.add</code> (::circt::hwarith::AddOp)</h3><p><em>Bitwidth-aware integer addition.</em></p><p>Syntax:</p><pre tabindex=0><code>operation ::= `hwarith.add` $inputs attr-dict `:` functional-type($inputs, $result)
</code></pre><p>The <code>add</code> operation takes two operands and returns one result. The result
type is inferred from the operand types, which may be signed or unsigned
scalar integer types of arbitrary bitwidth.</p><table><thead><tr><th style=text-align:left>LHS type</th><th style=text-align:left>RHS type</th><th style=text-align:left>Result type</th></tr></thead><tbody><tr><td style=text-align:left><code>ui&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code></td><td style=text-align:left><code>ui&lt;r></code>, <em>r</em> = max(<em>a</em>, <em>b</em>) + 1</td></tr><tr><td style=text-align:left><code>si&lt;a></code></td><td style=text-align:left><code>si&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = max(<em>a</em>, <em>b</em>) + 1</td></tr><tr><td style=text-align:left><code>ui&lt;a></code></td><td style=text-align:left><code>si&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>a</em> + 2 <strong>if</strong> <em>a</em> ≥ <em>b</em></td></tr><tr><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>b</em> + 1 <strong>if</strong> <em>a</em> &lt; <em>b</em></td></tr><tr><td style=text-align:left><code>si&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code></td><td style=text-align:left>Same as <code>ui&lt;b> + si&lt;a></code></td></tr></tbody></table><p>Examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mlir data-lang=mlir><span class=line><span class=cl><span class=nv>%0</span> <span class=p>=</span> hwarith<span class=p>.</span>add <span class=nv>%10</span><span class=p>,</span> <span class=nv>%11</span> <span class=p>:</span> <span class=p>(</span>ui3<span class=p>,</span> ui4<span class=p>)</span> <span class=p>-&gt;</span> ui5
</span></span><span class=line><span class=cl><span class=nv>%1</span> <span class=p>=</span> hwarith<span class=p>.</span>add <span class=nv>%12</span><span class=p>,</span> <span class=nv>%13</span> <span class=p>:</span> <span class=p>(</span>si3<span class=p>,</span> si3<span class=p>)</span> <span class=p>-&gt;</span> si4
</span></span><span class=line><span class=cl><span class=nv>%2</span> <span class=p>=</span> hwarith<span class=p>.</span>add <span class=nv>%14</span><span class=p>,</span> <span class=nv>%15</span> <span class=p>:</span> <span class=p>(</span>ui3<span class=p>,</span> si4<span class=p>)</span> <span class=p>-&gt;</span> si5
</span></span><span class=line><span class=cl><span class=nv>%3</span> <span class=p>=</span> hwarith<span class=p>.</span>add <span class=nv>%16</span><span class=p>,</span> <span class=nv>%17</span> <span class=p>:</span> <span class=p>(</span>si4<span class=p>,</span> ui6<span class=p>)</span> <span class=p>-&gt;</span> si8
</span></span></code></pre></div><p>Traits: <code>AlwaysSpeculatableImplTrait</code>, <code>Commutative</code></p><p>Interfaces: <code>ConditionallySpeculatable</code>, <code>InferTypeOpInterface</code>, <code>NoMemoryEffect (MemoryEffectOpInterface)</code></p><p>Effects: <code>MemoryEffects::Effect{}</code></p><h4 id=operands>Operands:</h4><table><thead><tr><th style=text-align:center>Operand</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>inputs</code></td><td>variadic of an arbitrary precision integer with signedness semantics</td></tr></tbody></table><h4 id=results>Results:</h4><table><thead><tr><th style=text-align:center>Result</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>result</code></td><td>an arbitrary precision integer with signedness semantics</td></tr></tbody></table><h3 id=hwarithcast-circthwarithcastop><code>hwarith.cast</code> (::circt::hwarith::CastOp)</h3><p><em>Signedness-aware cast.</em></p><p>Syntax:</p><pre tabindex=0><code>operation ::= `hwarith.cast` $in attr-dict `:` functional-type($in, $out)
</code></pre><p>The <code>cast</code> operation takes one operand and returns one result. Both, the
result type and the operand type can be of any scalar integer type with
arbitrary bitwidth. However, at least one of them needs to be a
HWArithIntegerType.</p><table><thead><tr><th style=text-align:left>Input type</th><th style=text-align:left>Result type</th><th style=text-align:left>Behavior</th></tr></thead><tbody><tr><td style=text-align:left><code>ui&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code>/<code>si&lt;b></code>/<code>i&lt;b></code></td><td style=text-align:left>zero-extension <strong>if</strong> <em>b</em> ≥ <em>a</em></td></tr><tr><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left>truncation <strong>if</strong> <em>b</em> &lt; <em>a</em></td></tr><tr><td style=text-align:left><code>si&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code>/<code>si&lt;b></code>/<code>i&lt;b></code></td><td style=text-align:left>sign-extension <strong>if</strong> <em>b</em> ≥ <em>a</em></td></tr><tr><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left>truncation <strong>if</strong> <em>b</em> &lt; <em>a</em></td></tr><tr><td style=text-align:left><code>i&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code>/<code>si&lt;b></code></td><td style=text-align:left>truncation <strong>if</strong> <em>b</em> <strong>≤</strong> <em>a</em></td></tr><tr><td style=text-align:left><code>i&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code>/<code>si&lt;b></code></td><td style=text-align:left>prohibited<sup>†</sup> <strong>if</strong> <em>b</em> > <em>a</em></td></tr></tbody></table><p>†) prohibited because of the ambiguity whether a sign or a zero extension
is required.</p><p>Examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mlir data-lang=mlir><span class=line><span class=cl><span class=nv>%0</span> <span class=p>=</span> hwarith<span class=p>.</span>cast <span class=nv>%10</span> <span class=p>:</span> <span class=p>(</span>ui3<span class=p>)</span> <span class=p>-&gt;</span> si5
</span></span><span class=line><span class=cl><span class=nv>%1</span> <span class=p>=</span> hwarith<span class=p>.</span>cast <span class=nv>%11</span> <span class=p>:</span> <span class=p>(</span>si3<span class=p>)</span> <span class=p>-&gt;</span> si4
</span></span><span class=line><span class=cl><span class=nv>%2</span> <span class=p>=</span> hwarith<span class=p>.</span>cast <span class=nv>%12</span> <span class=p>:</span> <span class=p>(</span>si7<span class=p>)</span> <span class=p>-&gt;</span> ui4
</span></span><span class=line><span class=cl><span class=nv>%3</span> <span class=p>=</span> hwarith<span class=p>.</span>cast <span class=nv>%13</span> <span class=p>:</span> <span class=p>(</span><span class=k>i7</span><span class=p>)</span> <span class=p>-&gt;</span> si5
</span></span><span class=line><span class=cl><span class=nv>%3</span> <span class=p>=</span> hwarith<span class=p>.</span>cast <span class=nv>%13</span> <span class=p>:</span> <span class=p>(</span>si14<span class=p>)</span> <span class=p>-&gt;</span> <span class=k>i4</span>
</span></span></code></pre></div><p>Traits: <code>AlwaysSpeculatableImplTrait</code></p><p>Interfaces: <code>ConditionallySpeculatable</code>, <code>NoMemoryEffect (MemoryEffectOpInterface)</code></p><p>Effects: <code>MemoryEffects::Effect{}</code></p><h4 id=operands-1>Operands:</h4><table><thead><tr><th style=text-align:center>Operand</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>in</code></td><td>integer</td></tr></tbody></table><h4 id=results-1>Results:</h4><table><thead><tr><th style=text-align:center>Result</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>out</code></td><td>integer</td></tr></tbody></table><h3 id=hwarithconstant-circthwarithconstantop><code>hwarith.constant</code> (::circt::hwarith::ConstantOp)</h3><p><em>Produce a constant value</em></p><p>The constant operation produces a sign-aware constant value.</p><pre tabindex=0><code>  %result = hwarith.constant 42 : t1
</code></pre><p>Traits: <code>AlwaysSpeculatableImplTrait</code>, <code>ConstantLike</code>, <code>FirstAttrDerivedResultType</code></p><p>Interfaces: <code>ConditionallySpeculatable</code>, <code>NoMemoryEffect (MemoryEffectOpInterface)</code></p><p>Effects: <code>MemoryEffects::Effect{}</code></p><h4 id=attributes>Attributes:</h4><table><tr><th>Attribute</th><th>MLIR Type</th><th>Description</th></tr><tr><td><code>rawValue</code></td><td>::mlir::IntegerAttr</td><td>arbitrary integer attribute</td></tr></table><h4 id=results-2>Results:</h4><table><thead><tr><th style=text-align:center>Result</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>result</code></td><td>an arbitrary precision integer with signedness semantics</td></tr></tbody></table><h3 id=hwarithdiv-circthwarithdivop><code>hwarith.div</code> (::circt::hwarith::DivOp)</h3><p><em>Bitwidth-aware integer division.</em></p><p>Syntax:</p><pre tabindex=0><code>operation ::= `hwarith.div` $inputs attr-dict `:` functional-type($inputs, $result)
</code></pre><p>The <code>div</code> operation takes two operands and returns one result. The result
type is inferred from the operand types, which may be signed or unsigned
scalar integer types of arbitrary bitwidth.</p><table><thead><tr><th style=text-align:left>LHS type</th><th style=text-align:left>RHS type</th><th style=text-align:left>Result type</th></tr></thead><tbody><tr><td style=text-align:left><code>ui&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code></td><td style=text-align:left><code>ui&lt;r></code>, <em>r</em> = <em>a</em></td></tr><tr><td style=text-align:left><code>si&lt;a></code></td><td style=text-align:left><code>si&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>a</em> + 1</td></tr><tr><td style=text-align:left><code>ui&lt;a></code></td><td style=text-align:left><code>si&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>a</em> + 1</td></tr><tr><td style=text-align:left><code>si&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>a</em></td></tr></tbody></table><p>Examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mlir data-lang=mlir><span class=line><span class=cl><span class=nv>%0</span> <span class=p>=</span> hwarith<span class=p>.</span>div <span class=nv>%10</span><span class=p>,</span> <span class=nv>%11</span> <span class=p>:</span> <span class=p>(</span>ui3<span class=p>,</span> ui4<span class=p>)</span> <span class=p>-&gt;</span> ui3
</span></span><span class=line><span class=cl><span class=nv>%1</span> <span class=p>=</span> hwarith<span class=p>.</span>div <span class=nv>%12</span><span class=p>,</span> <span class=nv>%13</span> <span class=p>:</span> <span class=p>(</span>si3<span class=p>,</span> si3<span class=p>)</span> <span class=p>-&gt;</span> si4
</span></span><span class=line><span class=cl><span class=nv>%2</span> <span class=p>=</span> hwarith<span class=p>.</span>div <span class=nv>%14</span><span class=p>,</span> <span class=nv>%15</span> <span class=p>:</span> <span class=p>(</span>ui3<span class=p>,</span> si4<span class=p>)</span> <span class=p>-&gt;</span> si4
</span></span><span class=line><span class=cl><span class=nv>%3</span> <span class=p>=</span> hwarith<span class=p>.</span>div <span class=nv>%16</span><span class=p>,</span> <span class=nv>%17</span> <span class=p>:</span> <span class=p>(</span>si4<span class=p>,</span> ui6<span class=p>)</span> <span class=p>-&gt;</span> si4
</span></span></code></pre></div><p>Traits: <code>AlwaysSpeculatableImplTrait</code></p><p>Interfaces: <code>ConditionallySpeculatable</code>, <code>InferTypeOpInterface</code>, <code>NoMemoryEffect (MemoryEffectOpInterface)</code></p><p>Effects: <code>MemoryEffects::Effect{}</code></p><h4 id=operands-2>Operands:</h4><table><thead><tr><th style=text-align:center>Operand</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>inputs</code></td><td>variadic of an arbitrary precision integer with signedness semantics</td></tr></tbody></table><h4 id=results-3>Results:</h4><table><thead><tr><th style=text-align:center>Result</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>result</code></td><td>an arbitrary precision integer with signedness semantics</td></tr></tbody></table><h3 id=hwarithicmp-circthwarithicmpop><code>hwarith.icmp</code> (::circt::hwarith::ICmpOp)</h3><p><em>Sign- and bitwidth-aware integer comparison.</em></p><p>Syntax:</p><pre tabindex=0><code>operation ::= `hwarith.icmp` $predicate $lhs `,` $rhs  attr-dict `:` type($lhs) `,` type($rhs)
</code></pre><p>The <code>icmp</code> operation compares two integers using a predicate. If the
predicate is true, returns 1, otherwise returns 0. This operation always
returns a one bit wide result of type <code>ui1</code>. Both operand types may be
signed or unsigned scalar integer types of arbitrary bitwidth.</p><table><thead><tr><th style=text-align:left>LHS type</th><th style=text-align:left>RHS type</th><th style=text-align:left>Comparison type</th><th style=text-align:left>Result type</th></tr></thead><tbody><tr><td style=text-align:left><code>ui&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code></td><td style=text-align:left><code>ui&lt;r></code>, <em>r</em> = max(<em>a</em>, <em>b</em>)</td><td style=text-align:left><code>ui1</code></td></tr><tr><td style=text-align:left><code>si&lt;a></code></td><td style=text-align:left><code>si&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = max(<em>a</em>, <em>b</em>)</td><td style=text-align:left><code>ui1</code></td></tr><tr><td style=text-align:left><code>ui&lt;a></code></td><td style=text-align:left><code>si&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>a</em> + 1 <strong>if</strong> <em>a</em> ≥ <em>b</em></td><td style=text-align:left><code>ui1</code></td></tr><tr><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>b</em> <strong>if</strong> <em>a</em> &lt; <em>b</em></td><td style=text-align:left><code>ui1</code></td></tr><tr><td style=text-align:left><code>si&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code></td><td style=text-align:left>Same as <code>ui&lt;b> si&lt;a></code></td><td style=text-align:left><code>ui1</code></td></tr></tbody></table><p>Examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mlir data-lang=mlir><span class=line><span class=cl><span class=nv>%0</span> <span class=p>=</span> hwarith<span class=p>.</span>icmp lt <span class=nv>%10</span><span class=p>,</span> <span class=nv>%11</span> <span class=p>:</span> ui5<span class=p>,</span> ui6
</span></span><span class=line><span class=cl><span class=nv>%1</span> <span class=p>=</span> hwarith<span class=p>.</span>icmp lt <span class=nv>%12</span><span class=p>,</span> <span class=nv>%13</span> <span class=p>:</span> si3<span class=p>,</span> si4
</span></span><span class=line><span class=cl><span class=nv>%2</span> <span class=p>=</span> hwarith<span class=p>.</span>icmp lt <span class=nv>%12</span><span class=p>,</span> <span class=nv>%11</span> <span class=p>:</span> si3<span class=p>,</span> ui6
</span></span></code></pre></div><p>Traits: <code>AlwaysSpeculatableImplTrait</code></p><p>Interfaces: <code>ConditionallySpeculatable</code>, <code>InferTypeOpInterface</code>, <code>NoMemoryEffect (MemoryEffectOpInterface)</code></p><p>Effects: <code>MemoryEffects::Effect{}</code></p><h4 id=attributes-1>Attributes:</h4><table><tr><th>Attribute</th><th>MLIR Type</th><th>Description</th></tr><tr><td><code>predicate</code></td><td>circt::hwarith::ICmpPredicateAttr</td><td>hwarith.icmp comparison predicate</td></tr></table><h4 id=operands-3>Operands:</h4><table><thead><tr><th style=text-align:center>Operand</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>lhs</code></td><td>an arbitrary precision integer with signedness semantics</td></tr><tr><td style=text-align:center><code>rhs</code></td><td>an arbitrary precision integer with signedness semantics</td></tr></tbody></table><h4 id=results-4>Results:</h4><table><thead><tr><th style=text-align:center>Result</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>result</code></td><td>1-bit unsigned integer</td></tr></tbody></table><h3 id=hwarithmul-circthwarithmulop><code>hwarith.mul</code> (::circt::hwarith::MulOp)</h3><p><em>Bitwidth-aware integer multiplication.</em></p><p>Syntax:</p><pre tabindex=0><code>operation ::= `hwarith.mul` $inputs attr-dict `:` functional-type($inputs, $result)
</code></pre><p>The <code>mul</code> operation takes two operands and returns one result. The result
type is inferred from the operand types, which may be signed or unsigned
scalar integer types of arbitrary bitwidth.</p><table><thead><tr><th style=text-align:left>LHS type</th><th style=text-align:left>RHS type</th><th style=text-align:left>Result type</th></tr></thead><tbody><tr><td style=text-align:left><code>ui&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code></td><td style=text-align:left><code>ui&lt;r></code>, <em>r</em> = <em>a</em> + <em>b</em></td></tr><tr><td style=text-align:left><code>si&lt;a></code></td><td style=text-align:left><code>si&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>a</em> + <em>b</em></td></tr><tr><td style=text-align:left><code>ui&lt;a></code></td><td style=text-align:left><code>si&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>a</em> + <em>b</em></td></tr><tr><td style=text-align:left><code>si&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>a</em> + <em>b</em></td></tr></tbody></table><p>Examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mlir data-lang=mlir><span class=line><span class=cl><span class=nv>%0</span> <span class=p>=</span> hwarith<span class=p>.</span>mul <span class=nv>%10</span><span class=p>,</span> <span class=nv>%11</span> <span class=p>:</span> <span class=p>(</span>ui3<span class=p>,</span> ui4<span class=p>)</span> <span class=p>-&gt;</span> ui7
</span></span><span class=line><span class=cl><span class=nv>%1</span> <span class=p>=</span> hwarith<span class=p>.</span>mul <span class=nv>%12</span><span class=p>,</span> <span class=nv>%13</span> <span class=p>:</span> <span class=p>(</span>si3<span class=p>,</span> si3<span class=p>)</span> <span class=p>-&gt;</span> si6
</span></span><span class=line><span class=cl><span class=nv>%2</span> <span class=p>=</span> hwarith<span class=p>.</span>mul <span class=nv>%14</span><span class=p>,</span> <span class=nv>%15</span> <span class=p>:</span> <span class=p>(</span>si3<span class=p>,</span> ui5<span class=p>)</span> <span class=p>-&gt;</span> si8
</span></span></code></pre></div><p>Traits: <code>AlwaysSpeculatableImplTrait</code>, <code>Commutative</code></p><p>Interfaces: <code>ConditionallySpeculatable</code>, <code>InferTypeOpInterface</code>, <code>NoMemoryEffect (MemoryEffectOpInterface)</code></p><p>Effects: <code>MemoryEffects::Effect{}</code></p><h4 id=operands-4>Operands:</h4><table><thead><tr><th style=text-align:center>Operand</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>inputs</code></td><td>variadic of an arbitrary precision integer with signedness semantics</td></tr></tbody></table><h4 id=results-5>Results:</h4><table><thead><tr><th style=text-align:center>Result</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>result</code></td><td>an arbitrary precision integer with signedness semantics</td></tr></tbody></table><h3 id=hwarithsub-circthwarithsubop><code>hwarith.sub</code> (::circt::hwarith::SubOp)</h3><p><em>Bitwidth-aware integer subtraction.</em></p><p>Syntax:</p><pre tabindex=0><code>operation ::= `hwarith.sub` $inputs attr-dict `:` functional-type($inputs, $result)
</code></pre><p>The <code>sub</code> operation takes two operands and returns one result. The result
type is inferred from the operand types, which may be signed or unsigned
scalar integer types of arbitrary bitwidth.</p><table><thead><tr><th style=text-align:left>LHS type</th><th style=text-align:left>RHS type</th><th style=text-align:left>Result type</th></tr></thead><tbody><tr><td style=text-align:left><code>ui&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = max(<em>a</em>, <em>b</em>) + 1</td></tr><tr><td style=text-align:left><code>si&lt;a></code></td><td style=text-align:left><code>si&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = max(<em>a</em>, <em>b</em>) + 1</td></tr><tr><td style=text-align:left><code>ui&lt;a></code></td><td style=text-align:left><code>si&lt;b></code></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>a</em> + 2 <strong>if</strong> <em>a</em> ≥ <em>b</em></td></tr><tr><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left><code>si&lt;r></code>, <em>r</em> = <em>b</em> + 1 <strong>if</strong> <em>a</em> &lt; <em>b</em></td></tr><tr><td style=text-align:left><code>si&lt;a></code></td><td style=text-align:left><code>ui&lt;b></code></td><td style=text-align:left>Same as <code>ui&lt;b> - si&lt;a></code></td></tr></tbody></table><p>Examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mlir data-lang=mlir><span class=line><span class=cl><span class=nv>%0</span> <span class=p>=</span> hwarith<span class=p>.</span>sub <span class=nv>%10</span><span class=p>,</span> <span class=nv>%11</span> <span class=p>:</span> <span class=p>(</span>ui3<span class=p>,</span> ui4<span class=p>)</span> <span class=p>-&gt;</span> si5
</span></span><span class=line><span class=cl><span class=nv>%1</span> <span class=p>=</span> hwarith<span class=p>.</span>sub <span class=nv>%12</span><span class=p>,</span> <span class=nv>%13</span> <span class=p>:</span> <span class=p>(</span>si3<span class=p>,</span> si3<span class=p>)</span> <span class=p>-&gt;</span> si4
</span></span><span class=line><span class=cl><span class=nv>%2</span> <span class=p>=</span> hwarith<span class=p>.</span>sub <span class=nv>%14</span><span class=p>,</span> <span class=nv>%15</span> <span class=p>:</span> <span class=p>(</span>ui3<span class=p>,</span> si4<span class=p>)</span> <span class=p>-&gt;</span> si5
</span></span><span class=line><span class=cl><span class=nv>%3</span> <span class=p>=</span> hwarith<span class=p>.</span>sub <span class=nv>%16</span><span class=p>,</span> <span class=nv>%17</span> <span class=p>:</span> <span class=p>(</span>si4<span class=p>,</span> ui6<span class=p>)</span> <span class=p>-&gt;</span> si8
</span></span></code></pre></div><p>Traits: <code>AlwaysSpeculatableImplTrait</code></p><p>Interfaces: <code>ConditionallySpeculatable</code>, <code>InferTypeOpInterface</code>, <code>NoMemoryEffect (MemoryEffectOpInterface)</code></p><p>Effects: <code>MemoryEffects::Effect{}</code></p><h4 id=operands-5>Operands:</h4><table><thead><tr><th style=text-align:center>Operand</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>inputs</code></td><td>variadic of an arbitrary precision integer with signedness semantics</td></tr></tbody></table><h4 id=results-6>Results:</h4><table><thead><tr><th style=text-align:center>Result</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>result</code></td><td>an arbitrary precision integer with signedness semantics</td></tr></tbody></table><h2 id=type-constraints>Type constraints</h2><h3 id=an-arbitrary-precision-integer-with-signedness-semantics>an arbitrary precision integer with signedness semantics</h3><h2>'hwarith' Dialect Docs</h2><ul><li><a href=https://circt.llvm.org/docs/Dialects/HWArith/RationaleHWArith/>HW Arith Dialect Rationale</a></li></ul><div class=edit-meta><br></div><nav class=pagination><a class="nav nav-prev" href=https://circt.llvm.org/docs/Dialects/HW/RationaleHW/ title="HW Dialect Rationale"><i class="fas fa-arrow-left" aria-hidden=true></i> Prev - HW Dialect Rationale</a>
<a class="nav nav-next" href=https://circt.llvm.org/docs/Dialects/HWArith/RationaleHWArith/ title="HW Arith Dialect Rationale">Next - HW Arith Dialect Rationale <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=slide-menu><ul><li><a href=https://circt.llvm.org/>Home</a></li><li><a href=https://circt.llvm.org/talks/>Talks and Related Publications</a></li><li><a href=https://circt.llvm.org/getting_started/>Getting Started</a></li><li class="parent has-sub-menu"><a href=https://circt.llvm.org/docs/>Code Documentation<span class="mark opened">-</span></a><ul class=sub-menu><li class=has-sub-menu><a href=https://circt.llvm.org/docs/CommandGuide/>CommandGuide<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/CommandGuide/handshake-runner/>handshake-runner</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Charter/>CIRCT Charter</a></li><li class="parent has-sub-menu"><a href=https://circt.llvm.org/docs/Dialects/>Dialects<span class="mark opened">-</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/ESIAppID/></a></li><li><a href=https://circt.llvm.org/docs/Dialects/Arc/>'arc' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/Calyx/>'calyx' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/CHIRRTL/>'chirrtl' Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Comb/>'comb' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Comb/RationaleComb/>`comb` Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/DC/>'dc' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/DC/RationaleDC/>DC Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Emit/>'emit' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Emit/RationaleEmit/>Emission (Emit) Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/ESI/>'esi' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/ESI/cosim/>ESI cosimulation model</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/types/>ESI data types and communication types</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/services/>ESI Global Services</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/software_api/>ESI Software APIs</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/notes/>Miscellaneous Notes</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/RationaleESI/>The Elastic Silicon Interconnect dialect</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/FIRRTL/>'firrtl' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/FIRRTL/FIRRTLAnnotations/>FIRRTL Annotations</a></li><li><a href=https://circt.llvm.org/docs/Dialects/FIRRTL/RationaleFIRRTL/>FIRRTL Dialect Rationale</a></li><li><a href=https://circt.llvm.org/docs/Dialects/FIRRTL/FIRRTLIntrinsics/>Intrinsics</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/FSM/>'fsm' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/FSM/RationaleFSM/>FSM Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Handshake/>'handshake' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Handshake/RationaleHandshake/>Handshake Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/HW/>'hw' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/HW/RationaleHW/>HW Dialect Rationale</a></li></ul></li><li class="active has-sub-menu"><a href=https://circt.llvm.org/docs/Dialects/HWArith/>'hwarith' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/HWArith/RationaleHWArith/>HW Arith Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Ibis/>'ibis' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Ibis/RationaleIbis/>`ibis` Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/LLHD/>'llhd' Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/LoopSchedule/>'loopschedule' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/LoopSchedule/LoopSchedule/>LoopSchedule Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/LTL/>'ltl' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/Moore/>'moore' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/MSFT/>'msft' Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/OM/>'om' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/OM/RationaleOM/>Object Model Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Pipeline/>'pipeline' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Pipeline/RationalePipeline/>Pipeline Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Seq/>'seq' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Seq/RationaleSeq/>Seq(uential) Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/Sim/>'sim' Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Sim/>'sim' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Sim/RationaleSim/>Simulation (Sim) Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/SSP/>'ssp' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/SSP/RationaleSSP/>SSP Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/SV/>'sv' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/SV/RationaleSV/>SV Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/SystemC/>'systemc' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/SystemC/RationaleSystemC/>SystemC Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/Verif/>'verif' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/Debug/>Debug Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Interop/>Interop Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Interop/RationaleInterop/>Interoperability Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/SMT/>SMT Dialect</a></li></ul></li><li><a href=https://circt.llvm.org/docs/ToolsWorkarounds/>EDA Tool Workarounds</a></li><li><a href=https://circt.llvm.org/docs/FormalVerification/>Formal Verification Tooling</a></li><li><a href=https://circt.llvm.org/docs/GettingStarted/>Getting Started with the CIRCT Project</a></li><li><a href=https://circt.llvm.org/docs/HLS/>HLS in CIRCT</a></li><li><a href=https://circt.llvm.org/docs/Passes/>Passes</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/PyCDE/>Python CIRCT Design Entry (PyCDE)<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/PyCDE/compiling/>Compiling CIRCT and PyCDE</a></li><li><a href=https://circt.llvm.org/docs/PyCDE/basics/>PyCDE Basics</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Scheduling/>Static scheduling infrastructure</a></li><li><a href=https://circt.llvm.org/docs/RationaleSymbols/>Symbol and Inner Symbol Rationale</a></li><li><a href=https://circt.llvm.org/docs/PythonBindings/>Using the Python Bindings</a></li><li><a href=https://circt.llvm.org/docs/VerilogGeneration/>Verilog and SystemVerilog Generation</a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>