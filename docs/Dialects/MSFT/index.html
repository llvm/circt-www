<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>'msft' Dialect - CIRCT</title><meta name=description content="Circuit IR Compilers and Tools"><meta name=generator content="Hugo 0.101.0"><link href=https://circt.llvm.org/index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://circt.llvm.org/docs/Dialects/MSFT/><link rel=stylesheet href=https://circt.llvm.org/css/theme.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script>
<link rel=stylesheet href=https://circt.llvm.org/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script>
<script src=https://circt.llvm.org/js/bundle.js></script>
<script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$', '$'] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
    }
  });
</script><style>:root{}</style></head><body><div class=container><header><h1><div><img src=https://circt.llvm.org//circt-logo.svg width=40px align=absmiddle>
CIRCT</div></h1><p class=description>Circuit IR Compilers and Tools</p></header><div class=global-menu><nav><ul><li class=parent><a href>Community<i class="fas fa-angle-right"></i></a><ul class=sub-menu><li class=child><a href=https://llvm.discourse.group/c/Projects-that-want-to-become-official-LLVM-Projects/circt/40>Forums</a></li><li class=child><a href=https://discord.gg/xS7Z362>Chat</a></li></ul></li><li class=parent><a href=https://github.com/llvm/circt/tree/main/>Source<i class="fas fa-angle-right"></i></a><ul class=sub-menu><li class=child><a href=/doxygen/>Doxygen</a></li><li class=child><a href=https://github.com/llvm/circt/tree/main/>GitHub</a></li></ul></li></ul></nav></div><div class=content-container><main><h1>'msft' Dialect</h1><p>Microsoft internal support dialect
Umbrella dialect for everything needed to support Microsoft development
but not thoroughly discussed. Most (if not everything) in this dialect is
a candidate for generalization and re-homing.</p><p><nav id=TableOfContents><ul><li><a href=#operation-definition>Operation definition</a><ul><li><a href=#msftconstructschannel-circtmsftchannelop><code>msft.constructs.channel</code> (::circt::msft::ChannelOp)</a></li><li><a href=#msftphysical_region-circtmsftdeclphysicalregionop><code>msft.physical_region</code> (::circt::msft::DeclPhysicalRegionOp)</a></li><li><a href=#msftpartition-circtmsftdesignpartitionop><code>msft.partition</code> (::circt::msft::DesignPartitionOp)</a></li><li><a href=#msftinstancedynamic-circtmsftdynamicinstanceop><code>msft.instance.dynamic</code> (::circt::msft::DynamicInstanceOp)</a></li><li><a href=#msftinstanceverb_attr-circtmsftdynamicinstanceverbatimattrop><code>msft.instance.verb_attr</code> (::circt::msft::DynamicInstanceVerbatimAttrOp)</a></li><li><a href=#msftentityextern-circtmsftentityexternop><code>msft.entity.extern</code> (::circt::msft::EntityExternOp)</a></li><li><a href=#msftinstancehierarchy-circtmsftinstancehierarchyop><code>msft.instance.hierarchy</code> (::circt::msft::InstanceHierarchyOp)</a></li><li><a href=#msftinstance-circtmsftinstanceop><code>msft.instance</code> (::circt::msft::InstanceOp)</a></li><li><a href=#msftmoduleextern-circtmsftmsftmoduleexternop><code>msft.module.extern</code> (::circt::msft::MSFTModuleExternOp)</a></li><li><a href=#msftmodule-circtmsftmsftmoduleop><code>msft.module</code> (::circt::msft::MSFTModuleOp)</a></li><li><a href=#msftoutput-circtmsftoutputop><code>msft.output</code> (::circt::msft::OutputOp)</a></li><li><a href=#msftpdlocation-circtmsftpdphyslocationop><code>msft.pd.location</code> (::circt::msft::PDPhysLocationOp)</a></li><li><a href=#msftpdphysregion-circtmsftpdphysregionop><code>msft.pd.physregion</code> (::circt::msft::PDPhysRegionOp)</a></li><li><a href=#msftpdreg_location-circtmsftpdregphyslocationop><code>msft.pd.reg_location</code> (::circt::msft::PDRegPhysLocationOp)</a></li><li><a href=#msftpeoutput-circtmsftpeoutputop><code>msft.pe.output</code> (::circt::msft::PEOutputOp)</a></li><li><a href=#msftsystolicarray-circtmsftsystolicarrayop><code>msft.systolic.array</code> (::circt::msft::SystolicArrayOp)</a></li></ul></li><li><a href=#attribute-definition>Attribute definition</a><ul><li><a href=#appidattr>AppIDAttr</a></li><li><a href=#locationvectorattr>LocationVectorAttr</a></li><li><a href=#physlocationattr>PhysLocationAttr</a></li><li><a href=#physicalboundsattr>PhysicalBoundsAttr</a></li></ul></li></ul></nav><h2 id=operation-definition>Operation definition&nbsp;<a class=headline-hash href=#operation-definition>¶</a></h2><h3 id=msftconstructschannel-circtmsftchannelop><code>msft.constructs.channel</code> (::circt::msft::ChannelOp)&nbsp;<a class=headline-hash href=#msftconstructschannel-circtmsftchannelop>¶</a></h3><p>A pipeline-able connection</p><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.constructs.channel` $input $clk $sym_name `(` $defaultStages `)` attr-dict `:` type($input)
</code></pre><p>A logical, feed-forward connection between a producer and consumer. Can be
pipelined with a number of stages (cycle delay) on a per-instance basis.
<code>defaultStages</code> is used when <code>stages</code> isn&rsquo;t specified by a
<code>DynamicInstance</code>. Non-resettable, for now.</p><p>Per-instance specification is not yet supported, so the default pipelining
is always used.</p><p>Traits: HasParent<msftmoduleop></p><p>Interfaces: InferTypeOpInterface, NoSideEffect (MemoryEffectOpInterface), Symbol</p><p>Effects: MemoryEffects::Effect{}</p><h4 id=attributes>Attributes:&nbsp;<a class=headline-hash href=#attributes>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>sym_name</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr><tr><td style=text-align:center><code>defaultStages</code></td><td style=text-align:center>::mlir::IntegerAttr</td><td>64-bit unsigned integer attribute</td></tr></tbody></table><h4 id=operands>Operands:&nbsp;<a class=headline-hash href=#operands>¶</a></h4><table><thead><tr><th style=text-align:center>Operand</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>input</code></td><td>any type</td></tr><tr><td style=text-align:center><code>clk</code></td><td>1-bit signless integer</td></tr></tbody></table><h4 id=results>Results:&nbsp;<a class=headline-hash href=#results>¶</a></h4><table><thead><tr><th style=text-align:center>Result</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>output</code></td><td>any type</td></tr></tbody></table><h3 id=msftphysical_region-circtmsftdeclphysicalregionop><code>msft.physical_region</code> (::circt::msft::DeclPhysicalRegionOp)&nbsp;<a class=headline-hash href=#msftphysical_region-circtmsftdeclphysicalregionop>¶</a></h3><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.physical_region` $sym_name `,` $bounds attr-dict
</code></pre><p>Traits: HasParent
<a href=mlir::ModuleOp>mlir::ModuleOp</a></p><p>Interfaces: Symbol</p><h4 id=attributes-1>Attributes:&nbsp;<a class=headline-hash href=#attributes-1>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>sym_name</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr><tr><td style=text-align:center><code>bounds</code></td><td style=text-align:center>::mlir::ArrayAttr</td><td>array of PhysicalBounds</td></tr></tbody></table><h3 id=msftpartition-circtmsftdesignpartitionop><code>msft.partition</code> (::circt::msft::DesignPartitionOp)&nbsp;<a class=headline-hash href=#msftpartition-circtmsftdesignpartitionop>¶</a></h3><p>A target &ldquo;module&rdquo; for moving entities</p><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.partition` $sym_name `,` $verilogName attr-dict
</code></pre><p>Sometimes EDA tools require designs to have a module hierarchy which doesn&rsquo;t
match the logical structure a designer would like to have. &ldquo;Design
partitions&rdquo; allow the designer to &ldquo;tag&rdquo; entities (instances, registers, etc.)
with a target design partition. During lowering, CIRCT will modify the
hierarchy to move the tagged entities into the design partition module. The
target design partition can then be used by subsequent EDA tools.</p><p>Traits: HasParent
<a href=msft::MSFTModuleOp>msft::MSFTModuleOp</a></p><p>Interfaces: Symbol</p><h4 id=attributes-2>Attributes:&nbsp;<a class=headline-hash href=#attributes-2>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>sym_name</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr><tr><td style=text-align:center><code>verilogName</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr></tbody></table><h3 id=msftinstancedynamic-circtmsftdynamicinstanceop><code>msft.instance.dynamic</code> (::circt::msft::DynamicInstanceOp)&nbsp;<a class=headline-hash href=#msftinstancedynamic-circtmsftdynamicinstanceop>¶</a></h3><p>A module instance in the instance hierarchy</p><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.instance.dynamic` custom&lt;ImplicitInnerRef&gt;($instanceRef) $body attr-dict
</code></pre><p>Represents an instance (as in instance in the instance hierarchy) referred
to henceforth as a dynamic instance. Specified with a path through the
instance hierarchy (which in the future will be replaced with an AppID).
Lowers to a <code>hw.globalref</code> but unlike a global ref, does not require all of
the ops participating in the globalref to contain a back pointer attribute.
Allows users to efficiently add placements to a large number of dynamic
instances which happen to map to a small number of static instances by
bulk-adding the necessary <code>hw.globalref</code> attributes.</p><p>During the lowering, moves the operations in the body to the top level and
gives them the symbol of the globalref which was created to replace the
dynamic instance.</p><p>Traits: HasParent&lt;circt::msft::InstanceHierarchyOp, circt::msft::DynamicInstanceOp>, NoTerminator</p><h4 id=attributes-3>Attributes:&nbsp;<a class=headline-hash href=#attributes-3>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>instanceRef</code></td><td style=text-align:center>::circt::hw::InnerRefAttr</td><td>name reference attribute</td></tr></tbody></table><h3 id=msftinstanceverb_attr-circtmsftdynamicinstanceverbatimattrop><code>msft.instance.verb_attr</code> (::circt::msft::DynamicInstanceVerbatimAttrOp)&nbsp;<a class=headline-hash href=#msftinstanceverb_attr-circtmsftdynamicinstanceverbatimattrop>¶</a></h3><p>Specify an arbitrary attribute attached to a dynamic instance</p><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.instance.verb_attr` ($ref^)? `name` `:` $name `value` `:` $value (`path` `:` $subPath^)? attr-dict
</code></pre><p>Allows a user to specify a custom attribute name and value which is attached
to a dynamic instance.</p><p>For Quartus tcl, translates to:
set_instance_assignment -name $name $value -to $parent|&lt;instance_path></p><p>Interfaces: DynInstDataOpInterface</p><h4 id=attributes-4>Attributes:&nbsp;<a class=headline-hash href=#attributes-4>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>name</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr><tr><td style=text-align:center><code>value</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr><tr><td style=text-align:center><code>subPath</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr><tr><td style=text-align:center><code>ref</code></td><td style=text-align:center>::mlir::FlatSymbolRefAttr</td><td>flat symbol reference attribute</td></tr></tbody></table><h3 id=msftentityextern-circtmsftentityexternop><code>msft.entity.extern</code> (::circt::msft::EntityExternOp)&nbsp;<a class=headline-hash href=#msftentityextern-circtmsftentityexternop>¶</a></h3><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.entity.extern` $sym_name $metadata attr-dict
</code></pre><p>Traits: HasParent
<a href=mlir::ModuleOp>mlir::ModuleOp</a></p><p>Interfaces: Symbol</p><h4 id=attributes-5>Attributes:&nbsp;<a class=headline-hash href=#attributes-5>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>sym_name</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr><tr><td style=text-align:center><code>metadata</code></td><td style=text-align:center>::mlir::Attribute</td><td>any attribute</td></tr></tbody></table><h3 id=msftinstancehierarchy-circtmsftinstancehierarchyop><code>msft.instance.hierarchy</code> (::circt::msft::InstanceHierarchyOp)&nbsp;<a class=headline-hash href=#msftinstancehierarchy-circtmsftinstancehierarchyop>¶</a></h3><p>The root of an instance hierarchy</p><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.instance.hierarchy` $topModuleRef ($instName^)? $body attr-dict
</code></pre><p>Models the &ldquo;root&rdquo; / &ldquo;top&rdquo; of an instance hierarchy. <code>DynamicInstanceOp</code>s
must be contained by this op. Specifies the top module and (optionally) an
&ldquo;instance&rdquo; name in the case where there are multiple instances of a
particular module in a design. (As is often the case where one isn&rsquo;t
producing the design&rsquo;s &ldquo;top&rdquo; module but a subdesign.)</p><p>Traits: HasParent
<a href=mlir::ModuleOp>mlir::ModuleOp</a>, NoTerminator</p><h4 id=attributes-6>Attributes:&nbsp;<a class=headline-hash href=#attributes-6>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>topModuleRef</code></td><td style=text-align:center>::mlir::FlatSymbolRefAttr</td><td>flat symbol reference attribute</td></tr><tr><td style=text-align:center><code>instName</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr></tbody></table><h3 id=msftinstance-circtmsftinstanceop><code>msft.instance</code> (::circt::msft::InstanceOp)&nbsp;<a class=headline-hash href=#msftinstance-circtmsftinstanceop>¶</a></h3><p>Instantiate a module</p><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.instance` $sym_name $moduleName `(` $inputs `)` custom&lt;ParameterList&gt;($parameters)
              attr-dict `:` functional-type($inputs, results)
</code></pre><p>Traits: HasParent<msftmoduleop></p><p>Interfaces: HWInstanceLike, OpAsmOpInterface, Symbol, SymbolUserOpInterface</p><h4 id=attributes-7>Attributes:&nbsp;<a class=headline-hash href=#attributes-7>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>sym_name</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr><tr><td style=text-align:center><code>moduleName</code></td><td style=text-align:center>::mlir::FlatSymbolRefAttr</td><td>flat symbol reference attribute</td></tr><tr><td style=text-align:center><code>parameters</code></td><td style=text-align:center>::mlir::ArrayAttr</td><td>parameter array</td></tr><tr><td style=text-align:center><code>targetDesignPartition</code></td><td style=text-align:center>::mlir::SymbolRefAttr</td><td>symbol reference attribute</td></tr></tbody></table><h4 id=operands-1>Operands:&nbsp;<a class=headline-hash href=#operands-1>¶</a></h4><table><thead><tr><th style=text-align:center>Operand</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>inputs</code></td><td>any type</td></tr></tbody></table><h4 id=results-1>Results:&nbsp;<a class=headline-hash href=#results-1>¶</a></h4><table><thead><tr><th style=text-align:center>Result</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center>«unnamed»</td><td>any type</td></tr></tbody></table><h3 id=msftmoduleextern-circtmsftmsftmoduleexternop><code>msft.module.extern</code> (::circt::msft::MSFTModuleExternOp)&nbsp;<a class=headline-hash href=#msftmoduleextern-circtmsftmsftmoduleexternop>¶</a></h3><p>MSFT external Module</p><p>Identical to <code>hw.module.extern</code>, and trivially lowers to that. This op
exists so that we can use <code>msft.instance</code> to refer to both <code>msft.module</code> and
<code>msft.module.extern</code>, rather than mixing <code>hw.instance</code> with <code>msft.instance</code>.</p><p>Traits: HasParent
<a href=mlir::ModuleOp>mlir::ModuleOp</a></p><p>Interfaces: Symbol</p><h4 id=attributes-8>Attributes:&nbsp;<a class=headline-hash href=#attributes-8>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>argNames</code></td><td style=text-align:center>::mlir::ArrayAttr</td><td>string array attribute</td></tr><tr><td style=text-align:center><code>resultNames</code></td><td style=text-align:center>::mlir::ArrayAttr</td><td>string array attribute</td></tr><tr><td style=text-align:center><code>parameters</code></td><td style=text-align:center>::mlir::ArrayAttr</td><td>parameter array</td></tr><tr><td style=text-align:center><code>verilogName</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr></tbody></table><h3 id=msftmodule-circtmsftmsftmoduleop><code>msft.module</code> (::circt::msft::MSFTModuleOp)&nbsp;<a class=headline-hash href=#msftmodule-circtmsftmsftmoduleop>¶</a></h3><p>MSFT HW Module</p><p>A lot like <code>hw.module</code>, but with a few differences:</p><ul><li>Can exist without a body. The body is filled in by a generator post op
creation.</li><li>Provides methods for mutation.</li></ul><p>Traits: HasParent
<a href=mlir::ModuleOp>mlir::ModuleOp</a>, IsolatedFromAbove, SingleBlockImplicitTerminator<outputop></p><p>Interfaces: FunctionOpInterface, HWModuleLike, OpAsmOpInterface, RegionKindInterface, Symbol</p><h4 id=attributes-9>Attributes:&nbsp;<a class=headline-hash href=#attributes-9>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>argNames</code></td><td style=text-align:center>::mlir::ArrayAttr</td><td>string array attribute</td></tr><tr><td style=text-align:center><code>resultNames</code></td><td style=text-align:center>::mlir::ArrayAttr</td><td>string array attribute</td></tr><tr><td style=text-align:center><code>parameters</code></td><td style=text-align:center>::mlir::DictionaryAttr</td><td>dictionary of named attribute values</td></tr><tr><td style=text-align:center><code>fileName</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr><tr><td style=text-align:center><code>childAppIDBases</code></td><td style=text-align:center>::mlir::ArrayAttr</td><td>string array attribute</td></tr></tbody></table><h3 id=msftoutput-circtmsftoutputop><code>msft.output</code> (::circt::msft::OutputOp)&nbsp;<a class=headline-hash href=#msftoutput-circtmsftoutputop>¶</a></h3><p>termination operation</p><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.output` attr-dict ($operands^ `:` qualified(type($operands)))?
</code></pre><p>Traits: HasParent<msftmoduleop>, ReturnLike, Terminator</p><p>Interfaces: NoSideEffect (MemoryEffectOpInterface)</p><p>Effects: MemoryEffects::Effect{}</p><h4 id=operands-2>Operands:&nbsp;<a class=headline-hash href=#operands-2>¶</a></h4><table><thead><tr><th style=text-align:center>Operand</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>operands</code></td><td>any type</td></tr></tbody></table><h3 id=msftpdlocation-circtmsftpdphyslocationop><code>msft.pd.location</code> (::circt::msft::PDPhysLocationOp)&nbsp;<a class=headline-hash href=#msftpdlocation-circtmsftpdphyslocationop>¶</a></h3><p>Specify a location for an instance</p><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.pd.location` ($ref^)? custom&lt;PhysLoc&gt;($loc) (`path` `:` $subPath^)? attr-dict
</code></pre><p>Used to specify a specific location on an FPGA to place a dynamic instance.
Supports specifying the location of a subpath for extern modules and device
primitives. Intended to live as a child of <code>instance.dynamic</code> initially
without the <code>ref</code> field. The dynamic instance lowering will fill in <code>ref</code>
with the symol of the <code>hw.globalref</code> op corresponding to the lowered dynamic
instance.</p><p>Interfaces: DynInstDataOpInterface</p><h4 id=attributes-10>Attributes:&nbsp;<a class=headline-hash href=#attributes-10>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>loc</code></td><td style=text-align:center>::circt::msft::PhysLocationAttr</td><td>Descibes a physical location on a device</td></tr><tr><td style=text-align:center><code>subPath</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr><tr><td style=text-align:center><code>ref</code></td><td style=text-align:center>::mlir::FlatSymbolRefAttr</td><td>flat symbol reference attribute</td></tr></tbody></table><h3 id=msftpdphysregion-circtmsftpdphysregionop><code>msft.pd.physregion</code> (::circt::msft::PDPhysRegionOp)&nbsp;<a class=headline-hash href=#msftpdphysregion-circtmsftpdphysregionop>¶</a></h3><p>Specify a physical region for an instance</p><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.pd.physregion` ($ref^)? $physRegionRef (`path` `:` $subPath^)? attr-dict
</code></pre><p>Annotate a particular entity within an op with the region of the devices
on an FPGA to which it should mapped. The physRegionRef must refer to a
DeclPhysicalRegion operation.</p><p>Interfaces: DynInstDataOpInterface</p><h4 id=attributes-11>Attributes:&nbsp;<a class=headline-hash href=#attributes-11>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>physRegionRef</code></td><td style=text-align:center>::mlir::FlatSymbolRefAttr</td><td>flat symbol reference attribute</td></tr><tr><td style=text-align:center><code>subPath</code></td><td style=text-align:center>::mlir::StringAttr</td><td>string attribute</td></tr><tr><td style=text-align:center><code>ref</code></td><td style=text-align:center>::mlir::FlatSymbolRefAttr</td><td>flat symbol reference attribute</td></tr></tbody></table><h3 id=msftpdreg_location-circtmsftpdregphyslocationop><code>msft.pd.reg_location</code> (::circt::msft::PDRegPhysLocationOp)&nbsp;<a class=headline-hash href=#msftpdreg_location-circtmsftpdregphyslocationop>¶</a></h3><p>Specify register locations</p><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.pd.reg_location` (`ref` $ref^)? custom&lt;ListOptionalRegLocList&gt;($locs) attr-dict
</code></pre><p>A version of &ldquo;PDPhysLocationOp&rdquo; specialized for registers, which have one
location per bit.</p><p>Interfaces: DynInstDataOpInterface</p><h4 id=attributes-12>Attributes:&nbsp;<a class=headline-hash href=#attributes-12>¶</a></h4><table><thead><tr><th style=text-align:center>Attribute</th><th style=text-align:center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>locs</code></td><td style=text-align:center>::circt::msft::LocationVectorAttr</td><td>Vector of optional locations corresponding to bits in a type</td></tr><tr><td style=text-align:center><code>ref</code></td><td style=text-align:center>::mlir::FlatSymbolRefAttr</td><td>flat symbol reference attribute</td></tr></tbody></table><h3 id=msftpeoutput-circtmsftpeoutputop><code>msft.pe.output</code> (::circt::msft::PEOutputOp)&nbsp;<a class=headline-hash href=#msftpeoutput-circtmsftpeoutputop>¶</a></h3><p>Set the outputs from a PE block</p><p>Syntax:</p><pre tabindex=0><code>operation ::= `msft.pe.output` $output attr-dict `:` type($output)
</code></pre><p>Traits: Terminator</p><h4 id=operands-3>Operands:&nbsp;<a class=headline-hash href=#operands-3>¶</a></h4><table><thead><tr><th style=text-align:center>Operand</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>output</code></td><td>any type</td></tr></tbody></table><h3 id=msftsystolicarray-circtmsftsystolicarrayop><code>msft.systolic.array</code> (::circt::msft::SystolicArrayOp)&nbsp;<a class=headline-hash href=#msftsystolicarray-circtmsftsystolicarrayop>¶</a></h3><p>Model of a row/column broadcast systolic array</p><p>Note: the PE region is NOT a graph region. This was intentional since
systolic arrays are entirely feed-forward.</p><p>Traits: SingleBlockImplicitTerminator<peoutputop></p><h4 id=operands-4>Operands:&nbsp;<a class=headline-hash href=#operands-4>¶</a></h4><table><thead><tr><th style=text-align:center>Operand</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>rowInputs</code></td><td>an ArrayType</td></tr><tr><td style=text-align:center><code>colInputs</code></td><td>an ArrayType</td></tr></tbody></table><h4 id=results-2>Results:&nbsp;<a class=headline-hash href=#results-2>¶</a></h4><table><thead><tr><th style=text-align:center>Result</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><code>peOutputs</code></td><td>an array of arrays</td></tr></tbody></table><h2 id=attribute-definition>Attribute definition&nbsp;<a class=headline-hash href=#attribute-definition>¶</a></h2><h3 id=appidattr>AppIDAttr&nbsp;<a class=headline-hash href=#appidattr>¶</a></h3><p>An application relevant instance identifier</p><p>Syntax:</p><pre tabindex=0><code>!msft.appid&lt;
  StringAttr,   # name
  uint64_t   # index
&gt;
</code></pre><p>Identifies an instance which is visible through multiple hierarchy levels.
Indended to make locating an instance easier in the instance hierarchy.</p><h4 id=parameters>Parameters:&nbsp;<a class=headline-hash href=#parameters>¶</a></h4><table><thead><tr><th style=text-align:center>Parameter</th><th style=text-align:center>C++ type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center>name</td><td style=text-align:center><code>StringAttr</code></td><td></td></tr><tr><td style=text-align:center>index</td><td style=text-align:center><code>uint64_t</code></td><td></td></tr></tbody></table><h3 id=locationvectorattr>LocationVectorAttr&nbsp;<a class=headline-hash href=#locationvectorattr>¶</a></h3><p>Vector of optional locations corresponding to bits in a type</p><h4 id=parameters-1>Parameters:&nbsp;<a class=headline-hash href=#parameters-1>¶</a></h4><table><thead><tr><th style=text-align:center>Parameter</th><th style=text-align:center>C++ type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center>type</td><td style=text-align:center><code>::mlir::TypeAttr</code></td><td></td></tr><tr><td style=text-align:center>locs</td><td style=text-align:center><code>::llvm::ArrayRef&lt;::circt::msft::PhysLocationAttr></code></td><td></td></tr></tbody></table><h3 id=physlocationattr>PhysLocationAttr&nbsp;<a class=headline-hash href=#physlocationattr>¶</a></h3><p>Descibes a physical location on a device</p><p>Annotate a particular entity within an op with the location of the device
on an FPGA to which it should mapped. The coordinates in this attribute
are absolute locations on the device, so if there are two instances of a
module with this annotation incorrect results will be generated. How to
solve this is a more general, open problem.</p><h4 id=parameters-2>Parameters:&nbsp;<a class=headline-hash href=#parameters-2>¶</a></h4><table><thead><tr><th style=text-align:center>Parameter</th><th style=text-align:center>C++ type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center>primitiveType</td><td style=text-align:center><code>PrimitiveTypeAttr</code></td><td></td></tr><tr><td style=text-align:center>x</td><td style=text-align:center><code>uint64_t</code></td><td></td></tr><tr><td style=text-align:center>y</td><td style=text-align:center><code>uint64_t</code></td><td></td></tr><tr><td style=text-align:center>num</td><td style=text-align:center><code>uint64_t</code></td><td></td></tr></tbody></table><h3 id=physicalboundsattr>PhysicalBoundsAttr&nbsp;<a class=headline-hash href=#physicalboundsattr>¶</a></h3><p>Describes a rectangle bounding a physical region on a device</p><p>Describes a rectangular bound within a device. The lower and upper bounds
must be specified for both the X and Y axis. The bounds are inclusive.</p><h4 id=parameters-3>Parameters:&nbsp;<a class=headline-hash href=#parameters-3>¶</a></h4><table><thead><tr><th style=text-align:center>Parameter</th><th style=text-align:center>C++ type</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center>xMin</td><td style=text-align:center><code>uint64_t</code></td><td></td></tr><tr><td style=text-align:center>xMax</td><td style=text-align:center><code>uint64_t</code></td><td></td></tr><tr><td style=text-align:center>yMin</td><td style=text-align:center><code>uint64_t</code></td><td></td></tr><tr><td style=text-align:center>yMax</td><td style=text-align:center><code>uint64_t</code></td><td></td></tr></tbody></table><div class=edit-meta><br></div><nav class=pagination><a class="nav nav-prev" href=https://circt.llvm.org/docs/Dialects/Moore/ title="'moore' Dialect"><i class="fas fa-arrow-left" aria-hidden=true></i> Prev - 'moore' Dialect</a>
<a class="nav nav-next" href=https://circt.llvm.org/docs/Dialects/Seq/ title="'seq' Dialect">Next - 'seq' Dialect <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=slide-menu><ul><li><a href=https://circt.llvm.org/>Home</a></li><li><a href=https://circt.llvm.org/talks/>Talks and Related Publications</a></li><li><a href=https://circt.llvm.org/getting_started/>Getting Started</a></li><li class="parent has-sub-menu"><a href=https://circt.llvm.org/docs/>Code Documentation<span class="mark opened">-</span></a><ul class=sub-menu><li class=has-sub-menu><a href=https://circt.llvm.org/docs/CommandGuide/>CommandGuide<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/CommandGuide/handshake-runner/>handshake-runner</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Charter/>CIRCT Charter</a></li><li class="parent has-sub-menu"><a href=https://circt.llvm.org/docs/Dialects/>Dialects<span class="mark opened">-</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Calyx/>'calyx' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/CHIRRTL/>'chirrtl' Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Comb/>'comb' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Comb/RationaleComb/>`comb` Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/ESI/>'esi' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/ESI/cosim/>ESI cosimulation model</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/types/>ESI data types and communication types</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/services/>ESI Global Services</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/software_api/>ESI Software APIs</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/notes/>Miscellaneous Notes</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/RationaleESI/>The Elastic Silicon Interconnect dialect</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/FIRRTL/>'firrtl' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/FIRRTL/FIRRTLAnnotations/>FIRRTL Annotations</a></li><li><a href=https://circt.llvm.org/docs/Dialects/FIRRTL/RationaleFIRRTL/>FIRRTL Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/FSM/>'fsm' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/FSM/RationaleFSM/>FSM Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Handshake/>'handshake' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Handshake/RationaleHandshake/>Handshake Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/HW/>'hw' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/HW/RationaleHW/>HW Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/LLHD/>'llhd' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/Moore/>'moore' Dialect</a></li><li class=active><a href=https://circt.llvm.org/docs/Dialects/MSFT/>'msft' Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Seq/>'seq' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Seq/RationaleSeq/>Seq(uential) Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/StaticLogic/>'staticlogic' Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/SV/>'sv' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/SV/RationaleSV/>SV Dialect Rationale</a></li></ul></li></ul></li><li><a href=https://circt.llvm.org/docs/GettingStarted/>Getting Started with the CIRCT Project</a></li><li><a href=https://circt.llvm.org/docs/Passes/>Passes</a></li><li><a href=https://circt.llvm.org/docs/PyCDE/>PyCDE</a></li><li><a href=https://circt.llvm.org/docs/Scheduling/>Static scheduling infrastructure</a></li><li><a href=https://circt.llvm.org/docs/RationaleSymbols/>Symbol and Inner Symbol Rationale</a></li><li><a href=https://circt.llvm.org/docs/PythonBindings/>Using the Python Bindings</a></li><li><a href=https://circt.llvm.org/docs/VerilogGeneration/>Verilog and SystemVerilog Generation</a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>