<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Compiling CIRCT and PyCDE - CIRCT</title><meta name=description content="Circuit IR Compilers and Tools"><meta name=generator content="Hugo 0.101.0"><link href=https://circt.llvm.org/index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://circt.llvm.org/docs/PyCDE/compiling/><link rel=stylesheet href=https://circt.llvm.org/css/theme.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script>
<link rel=stylesheet href=https://circt.llvm.org/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script>
<script src=https://circt.llvm.org/js/bundle.js></script>
<script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$', '$'] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
    }
  });
</script><style>:root{}</style></head><body><div class=container><header><h1><div><img src=https://circt.llvm.org//circt-logo.svg width=40px align=absmiddle>
CIRCT</div></h1><p class=description>Circuit IR Compilers and Tools</p></header><div class=global-menu><nav><ul><li class=parent><a href>Community<i class="fas fa-angle-right"></i></a><ul class=sub-menu><li class=child><a href=https://llvm.discourse.group/c/Projects-that-want-to-become-official-LLVM-Projects/circt/40>Forums</a></li><li class=child><a href=https://discord.gg/xS7Z362>Chat</a></li></ul></li><li class=parent><a href=https://github.com/llvm/circt/tree/main/>Source<i class="fas fa-angle-right"></i></a><ul class=sub-menu><li class=child><a href=/doxygen/>Doxygen</a></li><li class=child><a href=https://github.com/llvm/circt/tree/main/>GitHub</a></li></ul></li></ul></nav></div><div class=content-container><main><h1>Compiling CIRCT and PyCDE</h1><p>PyCDE is compiled as a component of CIRCT which pulls in the LLVM/MLIR project
as a submodule. As such, compiling it is complex and takes some time. If you&rsquo;re
not a CIRCT or PyCDE developer,
<a href=https://pypi.org/project/pycde/>use pip</a>.</p><h2 id=cloning-the-repo>Cloning the repo&nbsp;<a class=headline-hash href=#cloning-the-repo>¶</a></h2><p>If you havent already, you need to clone the CIRCT repo. Unless you already
have contributor permissions to the LLVM project, the easiest way to develop
(with the ability to create and push branches) is to fork the repo in your
GitHub account. You can then clone your fork. The clone command should look
like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone git@github.com:&lt;your_github_username&gt;/circt.git &lt;optional_repo_name&gt;
</span></span></code></pre></div><p>If you don&rsquo;t envision needing that ability, you can clone the main repo
following the directions in step 2 of the
<a href=GettingStarted.md>GettingStarted</a> page.</p><p>After cloning, navigate to your repo root (circt is the default) and use the
following to pull down LLVM:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git submodule update --init
</span></span></code></pre></div><h2 id=pycde-installation>PyCDE Installation&nbsp;<a class=headline-hash href=#pycde-installation>¶</a></h2><h3 id=installing-and-building-with-wheels>Installing and Building with Wheels&nbsp;<a class=headline-hash href=#installing-and-building-with-wheels>¶</a></h3><p>If you are using a fork, you&rsquo;ll need the git tags since the package versioning step requires them:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git remote add upstream git@github.com:llvm/circt.git
</span></span><span class=line><span class=cl>git fetch upstream --tags
</span></span></code></pre></div><p>The simplest way to compile PyCDE for local use is to install it with the <code>pip install</code> command:</p><pre tabindex=0><code>$ cd circt
$ pip install frontends/PyCDE --use-feature=in-tree-build
</code></pre><p>If you just want to build the wheel, use the <code>pip wheel</code> command:</p><pre tabindex=0><code>$ cd circt
$ pip wheel frontends/PyCDE --use-feature=in-tree-build
</code></pre><p>This will create a <code>pycde-&lt;version>-&lt;python version>-&lt;platform>.whl</code> file in the root of the repo.</p><h3 id=manual-compilation>Manual Compilation&nbsp;<a class=headline-hash href=#manual-compilation>¶</a></h3><p>Follow these steps to setup your repository for installing PyCDE via CMake.
Ensure that your repo has the proper Python requirements by running the
following from your CIRCT repo root:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python -m pip install -r frontends/PyCDE/python/requirements.txt
</span></span></code></pre></div><p>Although not scrictly needed for PyCDE develoment, scripts for some tools you
might want to install are located in utils/
(Cap&rsquo;n Proto, Verilator, OR-Tools):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>utils/get-capnp.sh
</span></span><span class=line><span class=cl>utils/get-verilator.sh
</span></span><span class=line><span class=cl>utils/get-or-tools
</span></span></code></pre></div><p>Install PyCDE with CMake. PyCDE requires cmake version >= 3.21:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir build
</span></span><span class=line><span class=cl><span class=nb>cd</span> build
</span></span><span class=line><span class=cl>cmake <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DCMAKE_BUILD_TYPE<span class=o>=</span>Debug <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DLLVM_ENABLE_PROJECTS<span class=o>=</span>mlir <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DLLVM_ENABLE_ASSERTIONS<span class=o>=</span>ON <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DLLVM_EXTERNAL_PROJECTS<span class=o>=</span>circt <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DLLVM_EXTERNAL_CIRCT_SOURCE_DIR<span class=o>=</span>.. <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DMLIR_ENABLE_BINDINGS_PYTHON<span class=o>=</span>ON <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DCIRCT_BINDINGS_PYTHON_ENABLED<span class=o>=</span>ON <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DCIRCT_ENABLE_FRONTENDS<span class=o>=</span>PyCDE
</span></span><span class=line><span class=cl>    -G Ninja ../llvm/llvm
</span></span></code></pre></div><p>Alternatively, you can pass the source and build paths to the CMake command and
build in the specified folder:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cmake <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DCMAKE_BUILD_TYPE<span class=o>=</span>Debug <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DLLVM_ENABLE_PROJECTS<span class=o>=</span>mlir <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DLLVM_ENABLE_ASSERTIONS<span class=o>=</span>ON <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DLLVM_EXTERNAL_PROJECTS<span class=o>=</span>circt <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DMLIR_ENABLE_BINDINGS_PYTHON<span class=o>=</span>ON <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DCIRCT_BINDINGS_PYTHON_ENABLED<span class=o>=</span>ON <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DCIRCT_ENABLE_FRONTENDS<span class=o>=</span>PyCDE <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -G Ninja <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DLLVM_EXTERNAL_CIRCT_SOURCE_DIR<span class=o>=</span>&lt;your_circt_repo_root_path&gt; <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -B&lt;path_to_desired_build_dir&gt; <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    &lt;your_circt_repo_root_path&gt;/llvm/llvm
</span></span></code></pre></div><p>Afterwards, use the following commands to ensure that CIRCT and PyCDE are built
and the tests pass:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ninja -C &lt;path_to_your_circt_build&gt; check-circt
</span></span><span class=line><span class=cl>ninja -C &lt;path_to_your_circt_build&gt; check-pycde
</span></span><span class=line><span class=cl>ninja -C &lt;path_to_your_circt_build&gt; check-pycde-integration
</span></span></code></pre></div><p>If you want to use PyCDE after compiling it, you must add the core CIRCT
bindings and PyCDE to your PYTHONPATH. This is quite helpful if you are hacking
on PyCDE as you don&rsquo;t have to run an install after each Python file change since
Ninja uses links in the build dir rather than copying the files as it does
during install.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>PYTHONPATH</span><span class=o>=</span><span class=s2>&#34;&lt;full_path_to_your_circt_build&gt;/tools/circt/python_packages/pycde&#34;</span>
</span></span></code></pre></div><p>If you are installing PyCDE through <code>ninja install</code>, the libraries and Python modules will be installed into the correct location automatically.</p><div class=edit-meta><br></div><nav class=pagination><a class="nav nav-prev" href=https://circt.llvm.org/docs/PyCDE/ title="Python CIRCT Design Entry (PyCDE)"><i class="fas fa-arrow-left" aria-hidden=true></i> Prev - Python CIRCT Design Entry (PyCDE)</a>
<a class="nav nav-next" href=https://circt.llvm.org/docs/PyCDE/basics/ title="PyCDE Basics">Next - PyCDE Basics <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=slide-menu><ul><li><a href=https://circt.llvm.org/>Home</a></li><li><a href=https://circt.llvm.org/talks/>Talks and Related Publications</a></li><li><a href=https://circt.llvm.org/getting_started/>Getting Started</a></li><li class="parent has-sub-menu"><a href=https://circt.llvm.org/docs/>Code Documentation<span class="mark opened">-</span></a><ul class=sub-menu><li class=has-sub-menu><a href=https://circt.llvm.org/docs/CommandGuide/>CommandGuide<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/CommandGuide/handshake-runner/>handshake-runner</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Charter/>CIRCT Charter</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/>Dialects<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/ESIAppID/></a></li><li><a href=https://circt.llvm.org/docs/Dialects/Arc/>'arc' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/Calyx/>'calyx' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/CHIRRTL/>'chirrtl' Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Comb/>'comb' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Comb/RationaleComb/>`comb` Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/DC/>'dc' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/DC/RationaleDC/>DC Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Emit/>'emit' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Emit/RationaleEmit/>Emission (Emit) Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/ESI/>'esi' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/ESI/cosim/>ESI cosimulation model</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/types/>ESI data types and communication types</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/services/>ESI Global Services</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/software_api/>ESI Software APIs</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/notes/>Miscellaneous Notes</a></li><li><a href=https://circt.llvm.org/docs/Dialects/ESI/RationaleESI/>The Elastic Silicon Interconnect dialect</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/FIRRTL/>'firrtl' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/FIRRTL/FIRRTLAnnotations/>FIRRTL Annotations</a></li><li><a href=https://circt.llvm.org/docs/Dialects/FIRRTL/RationaleFIRRTL/>FIRRTL Dialect Rationale</a></li><li><a href=https://circt.llvm.org/docs/Dialects/FIRRTL/FIRRTLIntrinsics/>Intrinsics</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/FSM/>'fsm' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/FSM/RationaleFSM/>FSM Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Handshake/>'handshake' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Handshake/RationaleHandshake/>Handshake Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/HW/>'hw' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/HW/RationaleHW/>HW Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/HWArith/>'hwarith' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/HWArith/RationaleHWArith/>HW Arith Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Ibis/>'ibis' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Ibis/RationaleIbis/>`ibis` Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/LLHD/>'llhd' Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/LoopSchedule/>'loopschedule' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/LoopSchedule/LoopSchedule/>LoopSchedule Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/LTL/>'ltl' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/Moore/>'moore' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/MSFT/>'msft' Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/OM/>'om' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/OM/RationaleOM/>Object Model Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Pipeline/>'pipeline' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Pipeline/RationalePipeline/>Pipeline Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Seq/>'seq' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Seq/RationaleSeq/>Seq(uential) Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/Sim/>'sim' Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Sim/>'sim' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Sim/RationaleSim/>Simulation (Sim) Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/SSP/>'ssp' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/SSP/RationaleSSP/>SSP Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/SV/>'sv' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/SV/RationaleSV/>SV Dialect Rationale</a></li></ul></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/SystemC/>'systemc' Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/SystemC/RationaleSystemC/>SystemC Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/Verif/>'verif' Dialect</a></li><li><a href=https://circt.llvm.org/docs/Dialects/Debug/>Debug Dialect</a></li><li class=has-sub-menu><a href=https://circt.llvm.org/docs/Dialects/Interop/>Interop Dialect<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://circt.llvm.org/docs/Dialects/Interop/RationaleInterop/>Interoperability Dialect Rationale</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Dialects/SMT/>SMT Dialect</a></li></ul></li><li><a href=https://circt.llvm.org/docs/ToolsWorkarounds/>EDA Tool Workarounds</a></li><li><a href=https://circt.llvm.org/docs/FormalVerification/>Formal Verification Tooling</a></li><li><a href=https://circt.llvm.org/docs/GettingStarted/>Getting Started with the CIRCT Project</a></li><li><a href=https://circt.llvm.org/docs/HLS/>HLS in CIRCT</a></li><li><a href=https://circt.llvm.org/docs/Passes/>Passes</a></li><li class="parent has-sub-menu"><a href=https://circt.llvm.org/docs/PyCDE/>Python CIRCT Design Entry (PyCDE)<span class="mark opened">-</span></a><ul class=sub-menu><li class=active><a href=https://circt.llvm.org/docs/PyCDE/compiling/>Compiling CIRCT and PyCDE</a></li><li><a href=https://circt.llvm.org/docs/PyCDE/basics/>PyCDE Basics</a></li></ul></li><li><a href=https://circt.llvm.org/docs/Scheduling/>Static scheduling infrastructure</a></li><li><a href=https://circt.llvm.org/docs/RationaleSymbols/>Symbol and Inner Symbol Rationale</a></li><li><a href=https://circt.llvm.org/docs/PythonBindings/>Using the Python Bindings</a></li><li><a href=https://circt.llvm.org/docs/VerilogGeneration/>Verilog and SystemVerilog Generation</a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>