<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CIRCT: /home/runner/work/circt-www/circt-www/circt_src/lib/Conversion/ExportVerilog/PrepareForEmission.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CIRCT
   &#160;<span id="projectnumber">19.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_fb3681dc9150b247305e64d29dbc20b7.html">Conversion</a></li><li class="navelem"><a class="el" href="dir_6cce4ad78de14f95ed50a18344002879.html">ExportVerilog</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">PrepareForEmission.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="Conversion_2PassDetail_8h_source.html">../PassDetail.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ExportVerilogInternals_8h_source.html">ExportVerilogInternals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circt_2Conversion_2ExportVerilog_8h_source.html">circt/Conversion/ExportVerilog.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="CombOps_8h_source.html">circt/Dialect/Comb/CombOps.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="DebugDialect_8h_source.html">circt/Dialect/Debug/DebugDialect.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="LTLDialect_8h_source.html">circt/Dialect/LTL/LTLDialect.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="VerifDialect_8h_source.html">circt/Dialect/Verif/VerifDialect.h</a>&quot;</code><br />
<code>#include &quot;mlir/IR/ImplicitLocOpBuilder.h&quot;</code><br />
<code>#include &quot;llvm/ADT/DenseSet.h&quot;</code><br />
<code>#include &quot;llvm/ADT/SmallPtrSet.h&quot;</code><br />
<code>#include &quot;llvm/ADT/TypeSwitch.h&quot;</code><br />
<code>#include &quot;llvm/Support/CommandLine.h&quot;</code><br />
<code>#include &quot;llvm/Support/Debug.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for PrepareForEmission.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="PrepareForEmission_8cpp__incl.png" border="0" usemap="#a_2home_2runner_2work_2circt-www_2circt-www_2circt__src_2lib_2Conversion_2ExportVerilog_2PrepareForEmission_8cpp" alt=""/></div>
<map name="a_2home_2runner_2work_2circt-www_2circt-www_2circt__src_2lib_2Conversion_2ExportVerilog_2PrepareForEmission_8cpp" id="a_2home_2runner_2work_2circt-www_2circt-www_2circt__src_2lib_2Conversion_2ExportVerilog_2PrepareForEmission_8cpp">
<area shape="rect" title=" " alt="" coords="3487,5,3697,76"/>
<area shape="rect" href="Conversion_2PassDetail_8h.html" title=" " alt="" coords="615,385,729,411"/>
<area shape="rect" href="ExportVerilogInternals_8h.html" title=" " alt="" coords="2591,131,2769,158"/>
<area shape="rect" href="CombOps_8h.html" title=" " alt="" coords="1582,377,1725,419"/>
<area shape="rect" title=" " alt="" coords="1717,303,1888,329"/>
<area shape="rect" title=" " alt="" coords="3123,474,3338,501"/>
<area shape="rect" title=" " alt="" coords="3379,221,3554,247"/>
<area shape="rect" href="circt_2Conversion_2ExportVerilog_8h.html" title=" " alt="" coords="1327,385,1558,411"/>
<area shape="rect" href="DebugDialect_8h.html" title=" " alt="" coords="3731,124,3877,165"/>
<area shape="rect" href="LTLDialect_8h.html" title=" " alt="" coords="3791,385,3999,411"/>
<area shape="rect" href="VerifDialect_8h.html" title=" " alt="" coords="3590,377,3725,419"/>
<area shape="rect" title=" " alt="" coords="3901,131,4061,158"/>
<area shape="rect" title=" " alt="" coords="4086,131,4301,158"/>
<area shape="rect" title=" " alt="" coords="4325,131,4488,158"/>
<area shape="rect" href="LoweringOptions_8h.html" title=" " alt="" coords="240,474,469,501"/>
<area shape="rect" title=" " alt="" coords="1433,474,1581,501"/>
<area shape="rect" title=" " alt="" coords="493,474,672,501"/>
<area shape="rect" title=" " alt="" coords="697,474,823,501"/>
<area shape="rect" title=" " alt="" coords="5,474,216,501"/>
<area shape="rect" title=" " alt="" coords="721,556,908,583"/>
<area shape="rect" title=" " alt="" coords="191,556,348,583"/>
<area shape="rect" title=" " alt="" coords="373,556,507,583"/>
<area shape="rect" href="CombVisitors_8h.html" title=" " alt="" coords="1582,213,1725,255"/>
<area shape="rect" href="EmitOps_8h.html" title=" " alt="" coords="2695,377,2830,419"/>
<area shape="rect" href="HWOps_8h.html" title=" " alt="" coords="1935,385,2126,411"/>
<area shape="rect" href="HWSymCache_8h.html" title=" " alt="" coords="2408,221,2643,247"/>
<area shape="rect" href="HWVisitors_8h.html" title=" " alt="" coords="1801,221,2015,247"/>
<area shape="rect" href="SVOps_8h.html" title=" " alt="" coords="2125,303,2304,329"/>
<area shape="rect" href="SVVisitors_8h.html" title=" " alt="" coords="2091,221,2293,247"/>
<area shape="rect" title=" " alt="" coords="2768,221,2904,247"/>
<area shape="rect" title=" " alt="" coords="2929,221,3095,247"/>
<area shape="rect" title=" " alt="" coords="3120,221,3355,247"/>
<area shape="rect" title=" " alt="" coords="2317,221,2384,247"/>
<area shape="rect" href="CombDialect_8h.html" title=" " alt="" coords="847,467,990,508"/>
<area shape="rect" href="HWTypes_8h.html" title=" " alt="" coords="1605,474,1808,501"/>
<area shape="rect" href="LLVM_8h.html" title=" " alt="" coords="3201,556,3356,583"/>
<area shape="rect" title=" " alt="" coords="2249,467,2445,508"/>
<area shape="rect" title=" " alt="" coords="2469,474,2672,501"/>
<area shape="rect" title=" " alt="" coords="1232,467,1408,508"/>
<area shape="rect" title=" " alt="" coords="2043,467,2224,508"/>
<area shape="rect" title=" " alt="" coords="1832,467,2019,508"/>
<area shape="rect" title=" " alt="" coords="1014,467,1157,508"/>
<area shape="rect" title=" " alt="" coords="3517,556,3643,583"/>
<area shape="rect" title=" " alt="" coords="2697,474,2861,501"/>
<area shape="rect" href="EmitDialect_8h.html" title=" " alt="" coords="3362,467,3497,508"/>
<area shape="rect" href="SeqDialect_8h.html" title=" " alt="" coords="2885,474,3099,501"/>
<area shape="rect" title=" " alt="" coords="4447,213,4596,255"/>
<area shape="rect" title=" " alt="" coords="4090,474,4321,501"/>
<area shape="rect" title=" " alt="" coords="3836,474,4065,501"/>
<area shape="rect" title=" " alt="" coords="3573,467,3710,508"/>
</map>
</div>
</div>
<p><a href="PrepareForEmission_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEmittedExpressionState.html">EmittedExpressionState</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEmittedExpressionStateManager.html">EmittedExpressionStateManager</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class handles information about AST structures of each expressions.  <a href="classEmittedExpressionStateManager.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structWireLowering.html">WireLowering</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;prepare-for-emission&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af56ff23e5a71ec3dc7bbfcefb93f9d36"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#af56ff23e5a71ec3dc7bbfcefb93f9d36">shouldSpillWire</a> (Operation &amp;op, const <a class="el" href="structcirct_1_1LoweringOptions.html">LoweringOptions</a> &amp;options)</td></tr>
<tr class="separator:af56ff23e5a71ec3dc7bbfcefb93f9d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a821aafc240a4d6a7ac7bb37aad4141b0"><td class="memItemLeft" align="right" valign="top">static StringAttr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#a821aafc240a4d6a7ac7bb37aad4141b0">getArgName</a> (Operation *op, size_t idx)</td></tr>
<tr class="separator:a821aafc240a4d6a7ac7bb37aad4141b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90497a7fbe9a7b9e281daa27a7976eb5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#a90497a7fbe9a7b9e281daa27a7976eb5">spillWiresForInstanceInputs</a> (HWInstanceLike op)</td></tr>
<tr class="separator:a90497a7fbe9a7b9e281daa27a7976eb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ca76533d14cb57c3e5db53fefbf71e7"><td class="memItemLeft" align="right" valign="top">static StringAttr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#a5ca76533d14cb57c3e5db53fefbf71e7">getResName</a> (Operation *op, size_t idx)</td></tr>
<tr class="separator:a5ca76533d14cb57c3e5db53fefbf71e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97d6f4208bda53e058d40f6870c0428a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#a97d6f4208bda53e058d40f6870c0428a">lowerInstanceResults</a> (HWInstanceLike op)</td></tr>
<tr class="separator:a97d6f4208bda53e058d40f6870c0428a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4479eebc2a9aad347efe5c22c421f138"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#a4479eebc2a9aad347efe5c22c421f138">lowerUsersToTemporaryWire</a> (Operation &amp;op, bool emitWireAtBlockBegin=false)</td></tr>
<tr class="memdesc:a4479eebc2a9aad347efe5c22c421f138"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emit an explicit wire or logic to assign operation's result.  <a href="PrepareForEmission_8cpp.html#a4479eebc2a9aad347efe5c22c421f138">More...</a><br /></td></tr>
<tr class="separator:a4479eebc2a9aad347efe5c22c421f138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeb482d8c7d86bfc440f016386974185"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#aaeb482d8c7d86bfc440f016386974185">lowerAlwaysInlineOperation</a> (Operation *op, const <a class="el" href="structcirct_1_1LoweringOptions.html">LoweringOptions</a> &amp;options)</td></tr>
<tr class="separator:aaeb482d8c7d86bfc440f016386974185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a617cb7578d8475746637f49ae13a6778"><td class="memItemLeft" align="right" valign="top">static std::pair&lt; Block *, Block::iterator &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#a617cb7578d8475746637f49ae13a6778">findLogicOpInsertionPoint</a> (Operation *op)</td></tr>
<tr class="separator:a617cb7578d8475746637f49ae13a6778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4a4155525d74df8ce32c558ea46cdfe"><td class="memItemLeft" align="right" valign="top">static Value&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#af4a4155525d74df8ce32c558ea46cdfe">lowerFullyAssociativeOp</a> (Operation &amp;op, OperandRange operands, SmallVector&lt; Operation * &gt; &amp;newOps)</td></tr>
<tr class="memdesc:af4a4155525d74df8ce32c558ea46cdfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lower a variadic fully-associative operation into an expression tree.  <a href="PrepareForEmission_8cpp.html#af4a4155525d74df8ce32c558ea46cdfe">More...</a><br /></td></tr>
<tr class="separator:af4a4155525d74df8ce32c558ea46cdfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac349c7c135b136b0b3a3357ae5a8dc9"><td class="memItemLeft" align="right" valign="top">static Operation *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#aac349c7c135b136b0b3a3357ae5a8dc9">rewriteAddWithNegativeConstant</a> (<a class="el" href="classcomb_1_1AddOp.html">comb::AddOp</a> add, <a class="el" href="classhw_1_1ConstantOp.html">hw::ConstantOp</a> rhsCst)</td></tr>
<tr class="memdesc:aac349c7c135b136b0b3a3357ae5a8dc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transform "a + -cst" ==&gt; "a - cst" for prettier output.  <a href="PrepareForEmission_8cpp.html#aac349c7c135b136b0b3a3357ae5a8dc9">More...</a><br /></td></tr>
<tr class="separator:aac349c7c135b136b0b3a3357ae5a8dc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a8da5b1d737fe8ddc30a6f94d5a8512"><td class="memItemLeft" align="right" valign="top">static Operation *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#a6a8da5b1d737fe8ddc30a6f94d5a8512">lowerStructExplodeOp</a> (hw::StructExplodeOp op)</td></tr>
<tr class="separator:a6a8da5b1d737fe8ddc30a6f94d5a8512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf9b305d69234dd98e5b24bbf8632ee"><td class="memItemLeft" align="right" valign="top">static Operation *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#aaaf9b305d69234dd98e5b24bbf8632ee">findParentInNonProceduralRegion</a> (Operation *op)</td></tr>
<tr class="memdesc:aaaf9b305d69234dd98e5b24bbf8632ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an operation in a procedural region, scan up the region tree to find the first operation in a graph region (typically an always or initial op).  <a href="PrepareForEmission_8cpp.html#aaaf9b305d69234dd98e5b24bbf8632ee">More...</a><br /></td></tr>
<tr class="separator:aaaf9b305d69234dd98e5b24bbf8632ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65793ea13ce1998a7099e7a115158486"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#a65793ea13ce1998a7099e7a115158486">rewriteSideEffectingExpr</a> (Operation *op)</td></tr>
<tr class="memdesc:a65793ea13ce1998a7099e7a115158486"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is invoked on side effecting Verilog expressions when we're in 'disallowLocalVariables' mode for old Verilog clients.  <a href="PrepareForEmission_8cpp.html#a65793ea13ce1998a7099e7a115158486">More...</a><br /></td></tr>
<tr class="separator:a65793ea13ce1998a7099e7a115158486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7fb0f9ed8fe0de4482bb5d439859396"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#aa7fb0f9ed8fe0de4482bb5d439859396">hoistNonSideEffectExpr</a> (Operation *op)</td></tr>
<tr class="memdesc:aa7fb0f9ed8fe0de4482bb5d439859396"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called for non-side-effecting Verilog expressions when we're in 'disallowLocalVariables' mode for old Verilog clients.  <a href="PrepareForEmission_8cpp.html#aa7fb0f9ed8fe0de4482bb5d439859396">More...</a><br /></td></tr>
<tr class="separator:aa7fb0f9ed8fe0de4482bb5d439859396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad75d60ce0e3fbd13a73239a46ddb6983"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#ad75d60ce0e3fbd13a73239a46ddb6983">isMovableDeclaration</a> (Operation *op)</td></tr>
<tr class="memdesc:ad75d60ce0e3fbd13a73239a46ddb6983"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether an op is a declaration that can be moved.  <a href="PrepareForEmission_8cpp.html#ad75d60ce0e3fbd13a73239a46ddb6983">More...</a><br /></td></tr>
<tr class="separator:ad75d60ce0e3fbd13a73239a46ddb6983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7840c3454059ec6cd89dd279dd53f8a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#ab7840c3454059ec6cd89dd279dd53f8a">reuseExistingInOut</a> (Operation *op, const <a class="el" href="structcirct_1_1LoweringOptions.html">LoweringOptions</a> &amp;options)</td></tr>
<tr class="memdesc:ab7840c3454059ec6cd89dd279dd53f8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">If exactly one use of this op is an assign, replace the other uses with a read from the assigned wire or reg.  <a href="PrepareForEmission_8cpp.html#ab7840c3454059ec6cd89dd279dd53f8a">More...</a><br /></td></tr>
<tr class="separator:ab7840c3454059ec6cd89dd279dd53f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a971e7d88ea53b4f71477beac46de09db"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#a971e7d88ea53b4f71477beac46de09db">prettifyAfterLegalization</a> (Block &amp;block, <a class="el" href="classEmittedExpressionStateManager.html">EmittedExpressionStateManager</a> &amp;expressionStateManager)</td></tr>
<tr class="memdesc:a971e7d88ea53b4f71477beac46de09db"><td class="mdescLeft">&#160;</td><td class="mdescRight">After the legalization, we are able to know accurate verilog AST structures.  <a href="PrepareForEmission_8cpp.html#a971e7d88ea53b4f71477beac46de09db">More...</a><br /></td></tr>
<tr class="separator:a971e7d88ea53b4f71477beac46de09db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7967cc48750bd47474a5683470403ed4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#a7967cc48750bd47474a5683470403ed4">buildWireLowerings</a> (Block &amp;block, SmallVectorImpl&lt; <a class="el" href="structWireLowering.html">WireLowering</a> &gt; &amp;wireLowerings)</td></tr>
<tr class="memdesc:a7967cc48750bd47474a5683470403ed4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the insertion location of declaration and assignment ops for <code>hw::WireOp</code>s in a block.  <a href="PrepareForEmission_8cpp.html#a7967cc48750bd47474a5683470403ed4">More...</a><br /></td></tr>
<tr class="separator:a7967cc48750bd47474a5683470403ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afee03757396edf2dba6b9ff347b805b3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#afee03757396edf2dba6b9ff347b805b3">applyWireLowerings</a> (Block &amp;block, ArrayRef&lt; <a class="el" href="structWireLowering.html">WireLowering</a> &gt; wireLowerings)</td></tr>
<tr class="memdesc:afee03757396edf2dba6b9ff347b805b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Materialize the SV wire declaration and assignment operations in the locations previously determined by a call to <code>buildWireLowerings</code>.  <a href="PrepareForEmission_8cpp.html#afee03757396edf2dba6b9ff347b805b3">More...</a><br /></td></tr>
<tr class="separator:afee03757396edf2dba6b9ff347b805b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add158b0905bd7a492a0df2ffb76d28cd"><td class="memItemLeft" align="right" valign="top">static LogicalResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PrepareForEmission_8cpp.html#add158b0905bd7a492a0df2ffb76d28cd">legalizeHWModule</a> (Block &amp;block, const <a class="el" href="structcirct_1_1LoweringOptions.html">LoweringOptions</a> &amp;options)</td></tr>
<tr class="memdesc:add158b0905bd7a492a0df2ffb76d28cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">For each module we emit, do a prepass over the structure, pre-lowering and otherwise rewriting operations we don't want to emit.  <a href="PrepareForEmission_8cpp.html#add158b0905bd7a492a0df2ffb76d28cd">More...</a><br /></td></tr>
<tr class="separator:add158b0905bd7a492a0df2ffb76d28cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&nbsp;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;prepare-for-emission&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00034">34</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="afee03757396edf2dba6b9ff347b805b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afee03757396edf2dba6b9ff347b805b3">&#9670;&nbsp;</a></span>applyWireLowerings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void applyWireLowerings </td>
          <td>(</td>
          <td class="paramtype">Block &amp;&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayRef&lt; <a class="el" href="structWireLowering.html">WireLowering</a> &gt;&#160;</td>
          <td class="paramname"><em>wireLowerings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Materialize the SV wire declaration and assignment operations in the locations previously determined by a call to <code>buildWireLowerings</code>. </p>
<p>This replaces all <code>hw::WireOp</code>s with their appropriate SV counterpart. </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00784">784</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="PassHelpers_8cpp_source.html#l00252">builder</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
<a id="a7967cc48750bd47474a5683470403ed4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7967cc48750bd47474a5683470403ed4">&#9670;&nbsp;</a></span>buildWireLowerings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void buildWireLowerings </td>
          <td>(</td>
          <td class="paramtype">Block &amp;&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SmallVectorImpl&lt; <a class="el" href="structWireLowering.html">WireLowering</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>wireLowerings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine the insertion location of declaration and assignment ops for <code>hw::WireOp</code>s in a block. </p>
<p>This function tries to place the declaration point as late as possible, right before the very first use of the wire. It also tries to place the assign point as early as possible, right after the assigned value becomes available. </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00755">755</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
<a id="a617cb7578d8475746637f49ae13a6778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a617cb7578d8475746637f49ae13a6778">&#9670;&nbsp;</a></span>findLogicOpInsertionPoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::pair&lt;Block *, Block::iterator&gt; findLogicOpInsertionPoint </td>
          <td>(</td>
          <td class="paramtype">Operation *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00314">314</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
<a id="aaaf9b305d69234dd98e5b24bbf8632ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaf9b305d69234dd98e5b24bbf8632ee">&#9670;&nbsp;</a></span>findParentInNonProceduralRegion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Operation* findParentInNonProceduralRegion </td>
          <td>(</td>
          <td class="paramtype">Operation *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given an operation in a procedural region, scan up the region tree to find the first operation in a graph region (typically an always or initial op). </p>
<p>By looking for a graph region, we will stop at graph-region #ifdef's that may enclose this operation. </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00401">401</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="CHIRRTL_8cpp.html#a3d3071d4df598249100e2e782ce857b2">assert()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00451">hoistNonSideEffectExpr()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>, and <a class="el" href="PrepareForEmission_8cpp_source.html#l00417">rewriteSideEffectingExpr()</a>.</p>

</div>
</div>
<a id="a821aafc240a4d6a7ac7bb37aad4141b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a821aafc240a4d6a7ac7bb37aad4141b0">&#9670;&nbsp;</a></span>getArgName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static StringAttr getArgName </td>
          <td>(</td>
          <td class="paramtype">Operation *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00069">69</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00078">spillWiresForInstanceInputs()</a>.</p>

</div>
</div>
<a id="a5ca76533d14cb57c3e5db53fefbf71e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ca76533d14cb57c3e5db53fefbf71e7">&#9670;&nbsp;</a></span>getResName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static StringAttr getResName </td>
          <td>(</td>
          <td class="paramtype">Operation *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00106">106</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00115">lowerInstanceResults()</a>.</p>

</div>
</div>
<a id="aa7fb0f9ed8fe0de4482bb5d439859396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7fb0f9ed8fe0de4482bb5d439859396">&#9670;&nbsp;</a></span>hoistNonSideEffectExpr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool hoistNonSideEffectExpr </td>
          <td>(</td>
          <td class="paramtype">Operation *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is called for non-side-effecting Verilog expressions when we're in 'disallowLocalVariables' mode for old Verilog clients. </p>
<p>It hoists non-constant expressions out to the top level so they don't turn into local variable declarations. </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00451">451</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="PrepareForEmission_8cpp_source.html#l00401">findParentInNonProceduralRegion()</a>, and <a class="el" href="ExportVerilogInternals_8h_source.html#l00399">circt::ExportVerilog::isExpressionAlwaysInline()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
<a id="ad75d60ce0e3fbd13a73239a46ddb6983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad75d60ce0e3fbd13a73239a46ddb6983">&#9670;&nbsp;</a></span>isMovableDeclaration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isMovableDeclaration </td>
          <td>(</td>
          <td class="paramtype">Operation *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether an op is a declaration that can be moved. </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00504">504</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
<a id="add158b0905bd7a492a0df2ffb76d28cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add158b0905bd7a492a0df2ffb76d28cd">&#9670;&nbsp;</a></span>legalizeHWModule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static LogicalResult legalizeHWModule </td>
          <td>(</td>
          <td class="paramtype">Block &amp;&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcirct_1_1LoweringOptions.html">LoweringOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For each module we emit, do a prepass over the structure, pre-lowering and otherwise rewriting operations we don't want to emit. </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">836</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacecirct_1_1sv.html#ab021a255c99cb9faad95650f9f6d20c9">circt::sv::addSVAttributes()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00784">applyWireLowerings()</a>, <a class="el" href="CHIRRTL_8cpp.html#a3d3071d4df598249100e2e782ce857b2">assert()</a>, <a class="el" href="PassHelpers_8cpp_source.html#l00252">builder</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00755">buildWireLowerings()</a>, <a class="el" href="LoweringOptions_8h_source.html#l00143">circt::LoweringOptions::disallowExpressionInliningInPorts</a>, <a class="el" href="LoweringOptions_8h_source.html#l00081">circt::LoweringOptions::disallowLocalVariables</a>, <a class="el" href="LoweringOptions_8h_source.html#l00077">circt::LoweringOptions::disallowPackedStructAssignments</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00314">findLogicOpInsertionPoint()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00401">findParentInNonProceduralRegion()</a>, <a class="el" href="CalyxOps_8cpp_source.html#l00054">circt::calyx::direction::get()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00451">hoistNonSideEffectExpr()</a>, <a class="el" href="ExportVerilogInternals_8h_source.html#l00423">circt::ExportVerilog::isConstantExpression()</a>, <a class="el" href="ExportVerilogInternals_8h_source.html#l00399">circt::ExportVerilog::isExpressionAlwaysInline()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00504">isMovableDeclaration()</a>, <a class="el" href="Conversion_2ExportVerilog_2ExportVerilog_8cpp_source.html#l00239">circt::ExportVerilog::isVerilogExpression()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00248">lowerAlwaysInlineOperation()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00324">lowerFullyAssociativeOp()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00115">lowerInstanceResults()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00380">lowerStructExplodeOp()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00168">lowerUsersToTemporaryWire()</a>, <a class="el" href="LoweringOptions_8h_source.html#l00149">circt::LoweringOptions::mitigateVivadoArrayIndexConstPropBug</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00617">reuseExistingInOut()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00363">rewriteAddWithNegativeConstant()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00417">rewriteSideEffectingExpr()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00061">shouldSpillWire()</a>, and <a class="el" href="PrepareForEmission_8cpp_source.html#l00078">spillWiresForInstanceInputs()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l01250">circt::ExportVerilog::prepareHWModule()</a>.</p>

</div>
</div>
<a id="aaeb482d8c7d86bfc440f016386974185"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaeb482d8c7d86bfc440f016386974185">&#9670;&nbsp;</a></span>lowerAlwaysInlineOperation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void lowerAlwaysInlineOperation </td>
          <td>(</td>
          <td class="paramtype">Operation *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcirct_1_1LoweringOptions.html">LoweringOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00248">248</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="CHIRRTL_8cpp.html#a3d3071d4df598249100e2e782ce857b2">assert()</a>, <a class="el" href="ExportVerilogInternals_8h_source.html#l00399">circt::ExportVerilog::isExpressionAlwaysInline()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00168">lowerUsersToTemporaryWire()</a>, and <a class="el" href="PrepareForEmission_8cpp_source.html#l00061">shouldSpillWire()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>, and <a class="el" href="PrepareForEmission_8cpp_source.html#l00617">reuseExistingInOut()</a>.</p>

</div>
</div>
<a id="af4a4155525d74df8ce32c558ea46cdfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4a4155525d74df8ce32c558ea46cdfe">&#9670;&nbsp;</a></span>lowerFullyAssociativeOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Value lowerFullyAssociativeOp </td>
          <td>(</td>
          <td class="paramtype">Operation &amp;&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OperandRange&#160;</td>
          <td class="paramname"><em>operands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SmallVector&lt; Operation * &gt; &amp;&#160;</td>
          <td class="paramname"><em>newOps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lower a variadic fully-associative operation into an expression tree. </p>
<p>This enables long-line splitting to work with them. NOLINTNEXTLINE(misc-no-recursion) </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00324">324</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="CHIRRTL_8cpp.html#a3d3071d4df598249100e2e782ce857b2">assert()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
<a id="a97d6f4208bda53e058d40f6870c0428a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97d6f4208bda53e058d40f6870c0428a">&#9670;&nbsp;</a></span>lowerInstanceResults()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void lowerInstanceResults </td>
          <td>(</td>
          <td class="paramtype">HWInstanceLike&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00115">115</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="PassHelpers_8cpp_source.html#l00252">builder</a>, <a class="el" href="support_8py_source.html#l00037">Python.support::connect()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00106">getResName()</a>, and <a class="el" href="Conversion_2ExportVerilog_2ExportVerilog_8cpp_source.html#l00295">circt::ExportVerilog::isZeroBitType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
<a id="a6a8da5b1d737fe8ddc30a6f94d5a8512"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a8da5b1d737fe8ddc30a6f94d5a8512">&#9670;&nbsp;</a></span>lowerStructExplodeOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Operation* lowerStructExplodeOp </td>
          <td>(</td>
          <td class="paramtype">hw::StructExplodeOp&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00380">380</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="PassHelpers_8cpp_source.html#l00252">builder</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
<a id="a4479eebc2a9aad347efe5c22c421f138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4479eebc2a9aad347efe5c22c421f138">&#9670;&nbsp;</a></span>lowerUsersToTemporaryWire()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void lowerUsersToTemporaryWire </td>
          <td>(</td>
          <td class="paramtype">Operation &amp;&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>emitWireAtBlockBegin</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Emit an explicit wire or logic to assign operation's result. </p>
<p>This function is used to create a temporary to legalize a verilog expression or to resolve use-before-def in a graph region. If <code>emitWireAtBlockBegin</code> is true, a temporary wire will be created at the beginning of the block. Otherwise, a wire is created just after op's position so that we can inline the assignment into its wire declaration. </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00168">168</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="PassHelpers_8cpp_source.html#l00252">builder</a>, <a class="el" href="support_8py_source.html#l00037">Python.support::connect()</a>, and <a class="el" href="Conversion_2ExportVerilog_2ExportVerilog_8cpp_source.html#l01394">circt::ExportVerilog::inferStructuralNameForTemporary()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00248">lowerAlwaysInlineOperation()</a>, and <a class="el" href="PrepareForEmission_8cpp_source.html#l00720">prettifyAfterLegalization()</a>.</p>

</div>
</div>
<a id="a971e7d88ea53b4f71477beac46de09db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a971e7d88ea53b4f71477beac46de09db">&#9670;&nbsp;</a></span>prettifyAfterLegalization()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prettifyAfterLegalization </td>
          <td>(</td>
          <td class="paramtype">Block &amp;&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEmittedExpressionStateManager.html">EmittedExpressionStateManager</a> &amp;&#160;</td>
          <td class="paramname"><em>expressionStateManager</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>After the legalization, we are able to know accurate verilog AST structures. </p>
<p>So this function walks and prettifies verilog IR with a heuristic method specified by <code>options.wireSpillingHeuristic</code> based on the structures. </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00720">720</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="Conversion_2ExportVerilog_2ExportVerilog_8cpp_source.html#l00239">circt::ExportVerilog::isVerilogExpression()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00168">lowerUsersToTemporaryWire()</a>, and <a class="el" href="PrepareForEmission_8cpp_source.html#l00685">EmittedExpressionStateManager::shouldSpillWireBasedOnState()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l01250">circt::ExportVerilog::prepareHWModule()</a>.</p>

</div>
</div>
<a id="ab7840c3454059ec6cd89dd279dd53f8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7840c3454059ec6cd89dd279dd53f8a">&#9670;&nbsp;</a></span>reuseExistingInOut()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool reuseExistingInOut </td>
          <td>(</td>
          <td class="paramtype">Operation *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcirct_1_1LoweringOptions.html">LoweringOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If exactly one use of this op is an assign, replace the other uses with a read from the assigned wire or reg. </p>
<p>This assumes the preconditions for doing so are met: op must be an expression in a non-procedural region. </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00617">617</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="PassHelpers_8cpp_source.html#l00252">builder</a>, <a class="el" href="ExportVerilogInternals_8h_source.html#l00399">circt::ExportVerilog::isExpressionAlwaysInline()</a>, and <a class="el" href="PrepareForEmission_8cpp_source.html#l00248">lowerAlwaysInlineOperation()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
<a id="aac349c7c135b136b0b3a3357ae5a8dc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac349c7c135b136b0b3a3357ae5a8dc9">&#9670;&nbsp;</a></span>rewriteAddWithNegativeConstant()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Operation* rewriteAddWithNegativeConstant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcomb_1_1AddOp.html">comb::AddOp</a>&#160;</td>
          <td class="paramname"><em>add</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classhw_1_1ConstantOp.html">hw::ConstantOp</a>&#160;</td>
          <td class="paramname"><em>rhsCst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transform "a + -cst" ==&gt; "a - cst" for prettier output. </p>
<p>This returns the first operation emitted. </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00363">363</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="PassHelpers_8cpp_source.html#l00252">builder</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
<a id="a65793ea13ce1998a7099e7a115158486"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65793ea13ce1998a7099e7a115158486">&#9670;&nbsp;</a></span>rewriteSideEffectingExpr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool rewriteSideEffectingExpr </td>
          <td>(</td>
          <td class="paramtype">Operation *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is invoked on side effecting Verilog expressions when we're in 'disallowLocalVariables' mode for old Verilog clients. </p>
<p>This ensures that any side effecting expressions are only used by a single BPAssign to a sv.reg or sv.logic operation. This ensures that the verilog emitter doesn't have to worry about spilling them.</p>
<p>This returns true if the op was rewritten, false otherwise. </p>

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00417">417</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="CHIRRTL_8cpp.html#a3d3071d4df598249100e2e782ce857b2">assert()</a>, <a class="el" href="PassHelpers_8cpp_source.html#l00252">builder</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00401">findParentInNonProceduralRegion()</a>, and <a class="el" href="seq_8py_source.html#l00020">seq::reg()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
<a id="af56ff23e5a71ec3dc7bbfcefb93f9d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af56ff23e5a71ec3dc7bbfcefb93f9d36">&#9670;&nbsp;</a></span>shouldSpillWire()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool shouldSpillWire </td>
          <td>(</td>
          <td class="paramtype">Operation &amp;&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcirct_1_1LoweringOptions.html">LoweringOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00061">61</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="Conversion_2ExportVerilog_2ExportVerilog_8cpp_source.html#l00901">circt::ExportVerilog::isExpressionEmittedInline()</a>, and <a class="el" href="Conversion_2ExportVerilog_2ExportVerilog_8cpp_source.html#l00239">circt::ExportVerilog::isVerilogExpression()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>, and <a class="el" href="PrepareForEmission_8cpp_source.html#l00248">lowerAlwaysInlineOperation()</a>.</p>

</div>
</div>
<a id="a90497a7fbe9a7b9e281daa27a7976eb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90497a7fbe9a7b9e281daa27a7976eb5">&#9670;&nbsp;</a></span>spillWiresForInstanceInputs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spillWiresForInstanceInputs </td>
          <td>(</td>
          <td class="paramtype">HWInstanceLike&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PrepareForEmission_8cpp_source.html#l00078">78</a> of file <a class="el" href="PrepareForEmission_8cpp_source.html">PrepareForEmission.cpp</a>.</p>

<p class="reference">References <a class="el" href="PassHelpers_8cpp_source.html#l00252">builder</a>, <a class="el" href="support_8py_source.html#l00037">Python.support::connect()</a>, <a class="el" href="PrepareForEmission_8cpp_source.html#l00069">getArgName()</a>, and <a class="el" href="PrepareForEmission_8cpp_source.html#l00043">circt::ExportVerilog::isSimpleReadOrPort()</a>.</p>

<p class="reference">Referenced by <a class="el" href="PrepareForEmission_8cpp_source.html#l00836">legalizeHWModule()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 28 2024 00:06:55 for CIRCT by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
